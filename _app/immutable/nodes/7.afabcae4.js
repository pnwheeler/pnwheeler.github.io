import{s as Ne,f as o,a as u,g as p,h as j,c as d,d as t,G as x,j as y,i as r,u as i,l as C,m as k,K as Pe,p as ot,S as pt,v as mt}from"../chunks/scheduler.8d84c197.js";import{S as Qe,i as Ue,b as N,d as Q,m as U,a as V,t as J,e as K,j as ft}from"../chunks/index.5e028736.js";import{G as it,R as Oe}from"../chunks/Gif.cb2d118f.js";import{g as Ie,a as Me}from"../chunks/spread.8a54911c.js";import{R as ut}from"../chunks/RangeSlider.00a7ad4c.js";function dt(_){let a;return{c(){a=C("Blender donut")},l(l){a=k(l,"Blender donut")},m(l,m){r(l,a,m)},d(l){l&&t(a)}}}function ct(_){let a;return{c(){a=C("Quick ttk on boss")},l(l){a=k(l,"Quick ttk on boss")},m(l,m){r(l,a,m)},d(l){l&&t(a)}}}function ht(_){let a,l,m,b,v,T,f,L=`Demo gifs: Tutorial Donut and gamer clip from my best 
		run of <a href="https://store.steampowered.com/app/1676130/Deadlink/" target="_blank">deadlink</a>.`,$;return m=new it({props:{src:"/media/projects/GifScrubber/blender_donut.mp4",height:"min(240px, 24vh)",radius_type:"combo left",$$slots:{caption:[dt]},$$scope:{ctx:_}}}),v=new it({props:{src:"/media/projects/GifScrubber/deadlink.mp4",height:"min(240px, 24vh)",t:"#t=1",autoplay:!1,controlsBg:"#0006",radius_type:"combo right",$$slots:{caption:[ct]},$$scope:{ctx:_}}}),{c(){a=o("figure"),l=o("div"),N(m.$$.fragment),b=u(),N(v.$$.fragment),T=u(),f=o("figcaption"),f.innerHTML=L,this.h()},l(h){a=p(h,"FIGURE",{class:!0,role:!0});var g=j(a);l=p(g,"DIV",{class:!0});var w=j(l);Q(m.$$.fragment,w),b=d(w),Q(v.$$.fragment,w),w.forEach(t),T=d(g),f=p(g,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),x(f)!=="svelte-1s14123"&&(f.innerHTML=L),g.forEach(t),this.h()},h(){y(l,"class","svelte-o0m8eb"),y(f,"class","caption"),y(a,"class","max-w svelte-o0m8eb"),y(a,"role","group")},m(h,g){r(h,a,g),i(a,l),U(m,l,null),i(l,b),U(v,l,null),i(a,T),i(a,f),$=!0},p(h,[g]){const w={};g&1&&(w.$$scope={dirty:g,ctx:h}),m.$set(w);const D={};g&1&&(D.$$scope={dirty:g,ctx:h}),v.$set(D)},i(h){$||(V(m.$$.fragment,h),V(v.$$.fragment,h),$=!0)},o(h){J(m.$$.fragment,h),J(v.$$.fragment,h),$=!1},d(h){h&&t(a),K(m),K(v)}}}class gt extends Qe{constructor(a){super(),Ue(this,a,null,ht,Ne,{})}}function vt(_){let a,l,m,b,v,T,f,L,$,h,g,w,D=`Simulating DPR=3 to compare canvas detail at different render scales. From left: default (<em>20px</em>), by 1×DPR
		(<em>60px</em>), and by 2×DPR (<em>120px</em>).`,M;const W=[{size:20},{percent:_[0]},_[2]];let z={};for(let n=0;n<W.length;n+=1)z=Pe(z,W[n]);m=new Oe({props:z});const H=[{size:60},{percent:_[0]},_[2]];let X={};for(let n=0;n<H.length;n+=1)X=Pe(X,H[n]);v=new Oe({props:X});const R=[{size:120},{percent:_[0]},_[2]];let pe={};for(let n=0;n<R.length;n+=1)pe=Pe(pe,R[n]);f=new Oe({props:pe});const Y=[_[1]];function S(n){_[3](n)}let A={};for(let n=0;n<Y.length;n+=1)A=Pe(A,Y[n]);return _[0]!==void 0&&(A.value=_[0]),$=new ut({props:A}),ot.push(()=>ft($,"value",S)),{c(){a=o("figure"),l=o("div"),N(m.$$.fragment),b=u(),N(v.$$.fragment),T=u(),N(f.$$.fragment),L=u(),N($.$$.fragment),g=u(),w=o("figcaption"),w.innerHTML=D,this.h()},l(n){a=p(n,"FIGURE",{class:!0,role:!0});var c=j(a);l=p(c,"DIV",{class:!0});var I=j(l);Q(m.$$.fragment,I),b=d(I),Q(v.$$.fragment,I),T=d(I),Q(f.$$.fragment,I),I.forEach(t),L=d(c),Q($.$$.fragment,c),g=d(c),w=p(c,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),x(w)!=="svelte-1g7ousm"&&(w.innerHTML=D),c.forEach(t),this.h()},h(){y(l,"class","radius examples svelte-15ez60t"),y(w,"class","caption"),y(a,"class","max-w svelte-15ez60t"),y(a,"role","group")},m(n,c){r(n,a,c),i(a,l),U(m,l,null),i(l,b),U(v,l,null),i(l,T),U(f,l,null),i(a,L),U($,a,null),i(a,g),i(a,w),M=!0},p(n,[c]){const I=c&5?Ie(W,[W[0],c&1&&{percent:n[0]},c&4&&Me(n[2])]):{};m.$set(I);const me=c&5?Ie(H,[H[0],c&1&&{percent:n[0]},c&4&&Me(n[2])]):{};v.$set(me);const F=c&5?Ie(R,[R[0],c&1&&{percent:n[0]},c&4&&Me(n[2])]):{};f.$set(F);const de=c&2?Ie(Y,[Me(n[1])]):{};!h&&c&1&&(h=!0,de.value=n[0],pt(()=>h=!1)),$.$set(de)},i(n){M||(V(m.$$.fragment,n),V(v.$$.fragment,n),V(f.$$.fragment,n),V($.$$.fragment,n),M=!0)},o(n){J(m.$$.fragment,n),J(v.$$.fragment,n),J(f.$$.fragment,n),J($.$$.fragment,n),M=!1},d(n){n&&t(a),K(m),K(v),K(f),K($)}}}function _t(_,a,l){const m={thumbColor:"var(--slate-blue-dim)",showNumber:!0,numSize:"var(--step--1)",step:"1",numColor:"var(--color-caption)"};let b=25;const v={use_decimal:!1,use_DPR:!1,fillSpace:!0,seeking:!0,bgColor:"none"};function T(f){b=f,l(0,b)}return[b,m,v,T]}class bt extends Qe{constructor(a){super(),Ue(this,a,_t,vt,Ne,{})}}function $t(_){let a,l="<span>Gif Scrubber</span>",m,b,v=`An inline video player I made to act as a drop-in alternative to <code data-type="ext">.gif</code>. Along with helping
	me avoid conversion-related headaches, the component makes media handling more flexible and has the added benefit of
	thirty years’ worth of codec improvements.`,T,f,L,$,h,g,w="Scrubbing",D,M,W=`To keep everything mobile-friendly and visually consistent between browsers, I implemented custom controls. An\r
	always-visible button on the corner toggles play state and, when the container is grabbed, pointer events kick in to\r
	manage the timeline.`,z,H,X,R,pe="s.t.",Y,S,A,n,c,I,me,F,de="Progress indicator",ce,E,Ee,Z,Ve="canvas",Le,ee,Je="svg",Re,te,De,Ge,he,ae,ge,ne,Ke=`Just to try, I scaled the dimensions up by an extra factor of two (<em>i.e.</em> the rightmost canvas) to make it
	<em>super</em> crisp—<em>super</em> unnecessary! It <em>was</em> slightly sharper and there <em>wasn&#39;t</em> any noticeable
	impact on performance (only a single canvas is active/time), so I went with it.`,ve,_e,be,se,We="Format Considerations",$e,re,Xe=`Compared to the <em>_actual_</em> format, using a <code data-type="html">video</code> element comes with several caveats
	ranging from annoyance→breakage:`,xe,q,Ye="<li><em>hold-to-save</em> doesn&#39;t work on mobile</li> <li>they aren&#39;t visible in reader mode</li> <li>compatibility isn&#39;t guaranteed—playback support depends on browser features and hardware capabilities</li>",ye,le,Ze=`To make a long story short, I address the last point by running a pre-build Python script to crawl my assets and
	generate <code data-type="ext">.webm</code> fallbacks where none exist. My magic <code data-type="ext">ffmpeg</code> command
	looks like this:`,we,O,et=`<code class="svelte-1e8tkd4"><span>ffmpeg</span> -i [input].mp4 -movflags +faststart -pix_fmt yuv420p -c:v libvpx-vp9 -threads 8 -crf 40 -g 32 -deadline good -an [output].webm</code>
`,Ce,ke,He,P,je,fe,tt="e.g.",Se,ie,Fe,ze,oe,at=".h265",Ae,ue,nt="etc.",qe,Te;return f=new gt({}),ae=new bt({}),{c(){a=o("h1"),a.innerHTML=l,m=u(),b=o("p"),b.innerHTML=v,T=u(),N(f.$$.fragment),L=u(),$=o("hr"),h=u(),g=o("h3"),g.textContent=w,D=u(),M=o("p"),M.textContent=W,z=u(),H=o("p"),X=C("It's set up "),R=o("em"),R.textContent=pe,Y=C(` moving a distance across the figure’s width is proportional to seeking that fraction of its\r
	video's duration. Huge s/o to Red Blob Games for their in-depth article about\r
	`),S=o("a"),A=C("draggable objects"),n=C("—extremely helpful!"),c=u(),I=o("hr"),me=u(),F=o("h3"),F.textContent=de,ce=u(),E=o("p"),Ee=C("Porting the original version to "),Z=o("code"),Z.textContent=Ve,Le=C(` solved the issue I had with janky\r
	`),ee=o("code"),ee.textContent=Je,Re=C(` transforms, but introduced another that gave the graphic a low-quality, aliased look\r
	on my phone. Thankfully, browsers provide a fix for high dpi screens courtesy the\r
	`),te=o("a"),De=C("device pixel ratio (DPR)"),Ge=C(", which can be queried and used as a resolution multiplier."),he=u(),N(ae.$$.fragment),ge=u(),ne=o("p"),ne.innerHTML=Ke,ve=u(),_e=o("hr"),be=u(),se=o("h3"),se.textContent=We,$e=u(),re=o("p"),re.innerHTML=Xe,xe=u(),q=o("ol"),q.innerHTML=Ye,ye=u(),le=o("p"),le.innerHTML=Ze,we=u(),O=o("pre"),O.innerHTML=et,Ce=u(),ke=o("hr"),He=u(),P=o("p"),je=C("Getting to a point where the behavior felt predictable took a lot more effort than I expected ("),fe=o("em"),fe.textContent=tt,Se=u(),ie=o("a"),Fe=C("safari media fragment hack"),ze=C(", no "),oe=o("code"),oe.textContent=at,Ae=C(` in\r
	FireFox, `),ue=o("em"),ue.textContent=nt,qe=C("), but I’m happy with how it turned out!"),this.h()},l(e){a=p(e,"H1",{"data-svelte-h":!0}),x(a)!=="svelte-16mbdpp"&&(a.innerHTML=l),m=d(e),b=p(e,"P",{"data-svelte-h":!0}),x(b)!=="svelte-8vu8mi"&&(b.innerHTML=v),T=d(e),Q(f.$$.fragment,e),L=d(e),$=p(e,"HR",{}),h=d(e),g=p(e,"H3",{"data-svelte-h":!0}),x(g)!=="svelte-1c67i5l"&&(g.textContent=w),D=d(e),M=p(e,"P",{"data-svelte-h":!0}),x(M)!=="svelte-188otny"&&(M.textContent=W),z=d(e),H=p(e,"P",{});var s=j(H);X=k(s,"It's set up "),R=p(s,"EM",{"data-svelte-h":!0}),x(R)!=="svelte-hspnzd"&&(R.textContent=pe),Y=k(s,` moving a distance across the figure’s width is proportional to seeking that fraction of its\r
	video's duration. Huge s/o to Red Blob Games for their in-depth article about\r
	`),S=p(s,"A",{href:!0,target:!0});var st=j(S);A=k(st,"draggable objects"),st.forEach(t),n=k(s,"—extremely helpful!"),s.forEach(t),c=d(e),I=p(e,"HR",{}),me=d(e),F=p(e,"H3",{"data-svelte-h":!0}),x(F)!=="svelte-lxue3i"&&(F.textContent=de),ce=d(e),E=p(e,"P",{});var B=j(E);Ee=k(B,"Porting the original version to "),Z=p(B,"CODE",{"data-type":!0,"data-svelte-h":!0}),x(Z)!=="svelte-jhma2z"&&(Z.textContent=Ve),Le=k(B,` solved the issue I had with janky\r
	`),ee=p(B,"CODE",{"data-type":!0,"data-svelte-h":!0}),x(ee)!=="svelte-mflvan"&&(ee.textContent=Je),Re=k(B,` transforms, but introduced another that gave the graphic a low-quality, aliased look\r
	on my phone. Thankfully, browsers provide a fix for high dpi screens courtesy the\r
	`),te=p(B,"A",{href:!0,target:!0});var rt=j(te);De=k(rt,"device pixel ratio (DPR)"),rt.forEach(t),Ge=k(B,", which can be queried and used as a resolution multiplier."),B.forEach(t),he=d(e),Q(ae.$$.fragment,e),ge=d(e),ne=p(e,"P",{"data-svelte-h":!0}),x(ne)!=="svelte-15ae648"&&(ne.innerHTML=Ke),ve=d(e),_e=p(e,"HR",{}),be=d(e),se=p(e,"H3",{"data-svelte-h":!0}),x(se)!=="svelte-zo8yxa"&&(se.textContent=We),$e=d(e),re=p(e,"P",{"data-svelte-h":!0}),x(re)!=="svelte-7ggyjv"&&(re.innerHTML=Xe),xe=d(e),q=p(e,"OL",{role:!0,"data-svelte-h":!0}),x(q)!=="svelte-1opg838"&&(q.innerHTML=Ye),ye=d(e),le=p(e,"P",{"data-svelte-h":!0}),x(le)!=="svelte-i3a949"&&(le.innerHTML=Ze),we=d(e),O=p(e,"PRE",{class:!0,"data-svelte-h":!0}),x(O)!=="svelte-1wwy5vq"&&(O.innerHTML=et),Ce=d(e),ke=p(e,"HR",{}),He=d(e),P=p(e,"P",{});var G=j(P);je=k(G,"Getting to a point where the behavior felt predictable took a lot more effort than I expected ("),fe=p(G,"EM",{"data-svelte-h":!0}),x(fe)!=="svelte-2dbwd4"&&(fe.textContent=tt),Se=d(G),ie=p(G,"A",{href:!0,target:!0});var lt=j(ie);Fe=k(lt,"safari media fragment hack"),lt.forEach(t),ze=k(G,", no "),oe=p(G,"CODE",{"data-type":!0,"data-svelte-h":!0}),x(oe)!=="svelte-1lul1jc"&&(oe.textContent=at),Ae=k(G,` in\r
	FireFox, `),ue=p(G,"EM",{"data-svelte-h":!0}),x(ue)!=="svelte-ynskcq"&&(ue.textContent=nt),qe=k(G,"), but I’m happy with how it turned out!"),G.forEach(t),this.h()},h(){y(S,"href",xt),y(S,"target",Be),y(Z,"data-type","html"),y(ee,"data-type","html"),y(te,"href",yt),y(te,"target",Be),y(q,"role","list"),y(O,"class","codeblock overflow-scrollbar max-w svelte-1e8tkd4"),y(ie,"href",wt),y(ie,"target",Be),y(oe,"data-type","ext")},m(e,s){r(e,a,s),r(e,m,s),r(e,b,s),r(e,T,s),U(f,e,s),r(e,L,s),r(e,$,s),r(e,h,s),r(e,g,s),r(e,D,s),r(e,M,s),r(e,z,s),r(e,H,s),i(H,X),i(H,R),i(H,Y),i(H,S),i(S,A),i(H,n),r(e,c,s),r(e,I,s),r(e,me,s),r(e,F,s),r(e,ce,s),r(e,E,s),i(E,Ee),i(E,Z),i(E,Le),i(E,ee),i(E,Re),i(E,te),i(te,De),i(E,Ge),r(e,he,s),U(ae,e,s),r(e,ge,s),r(e,ne,s),r(e,ve,s),r(e,_e,s),r(e,be,s),r(e,se,s),r(e,$e,s),r(e,re,s),r(e,xe,s),r(e,q,s),r(e,ye,s),r(e,le,s),r(e,we,s),r(e,O,s),r(e,Ce,s),r(e,ke,s),r(e,He,s),r(e,P,s),i(P,je),i(P,fe),i(P,Se),i(P,ie),i(ie,Fe),i(P,ze),i(P,oe),i(P,Ae),i(P,ue),i(P,qe),Te=!0},p:mt,i(e){Te||(V(f.$$.fragment,e),V(ae.$$.fragment,e),Te=!0)},o(e){J(f.$$.fragment,e),J(ae.$$.fragment,e),Te=!1},d(e){e&&(t(a),t(m),t(b),t(T),t(L),t($),t(h),t(g),t(D),t(M),t(z),t(H),t(c),t(I),t(me),t(F),t(ce),t(E),t(he),t(ge),t(ne),t(ve),t(_e),t(be),t(se),t($e),t(re),t(xe),t(q),t(ye),t(le),t(we),t(O),t(Ce),t(ke),t(He),t(P)),K(f,e),K(ae,e)}}}const Be="_blank",xt="https://www.redblobgames.com/making-of/draggable/",yt="https://cloudinary.com/glossary/device-pixel-ratio",wt="https://muffinman.io/blog/hack-for-ios-safari-to-display-html-video-thumbnail/";class It extends Qe{constructor(a){super(),Ue(this,a,null,$t,Ne,{})}}export{It as component};
