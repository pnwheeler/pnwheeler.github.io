import{s as Qe,f as l,a as d,g as i,h as L,c as m,d as t,G as _,j as v,i as r,u as o,l as I,m as T,L as Ge,p as ot,S as pt,v as ft}from"../chunks/scheduler.7ea44816.js";import{S as Ve,i as Je,b as Z,d as ee,m as te,a as ae,t as se,e as ne,j as ut}from"../chunks/index.0f0b2a21.js";import{G as it,R as Be}from"../chunks/Gif.bfdeb659.js";import{g as Le,a as Re}from"../chunks/spread.8a54911c.js";import{R as ct}from"../chunks/RangeSlider.8612c7e6.js";function dt(x){let a;return{c(){a=I("Blender donut")},l(p){a=T(p,"Blender donut")},m(p,u){r(p,a,u)},d(p){p&&t(a)}}}function mt(x){let a;return{c(){a=I("Quick ttk on boss")},l(p){a=T(p,"Quick ttk on boss")},m(p,u){r(p,a,u)},d(p){p&&t(a)}}}function ht(x){let a,p,u,h,$,M,b,w=`Demo gifs: Tutorial Donut and gamer clip from my best 
		run of <a href="https://store.steampowered.com/app/1676130/Deadlink/" target="_blank">deadlink</a>.`,C;return u=new it({props:{src:"/media/projects/GifScrubber/blender_donut.mp4",height:"min(240px, 24vh)",radius_type:"combo left",$$slots:{caption:[dt]},$$scope:{ctx:x}}}),$=new it({props:{src:"/media/projects/GifScrubber/deadlink.mp4",height:"min(240px, 24vh)",t:"#t=1",autoplay:!1,controlsBg:"#0006",radius_type:"combo right",$$slots:{caption:[mt]},$$scope:{ctx:x}}}),{c(){a=l("figure"),p=l("div"),Z(u.$$.fragment),h=d(),Z($.$$.fragment),M=d(),b=l("figcaption"),b.innerHTML=w,this.h()},l(c){a=i(c,"FIGURE",{class:!0,role:!0});var g=L(a);p=i(g,"DIV",{class:!0});var H=L(p);ee(u.$$.fragment,H),h=m(H),ee($.$$.fragment,H),H.forEach(t),M=m(g),b=i(g,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),_(b)!=="svelte-1s14123"&&(b.innerHTML=w),g.forEach(t),this.h()},h(){v(p,"class","radius-group svelte-6cxl5a"),v(b,"class","caption"),v(a,"class","max-w svelte-6cxl5a"),v(a,"role","group")},m(c,g){r(c,a,g),o(a,p),te(u,p,null),o(p,h),te($,p,null),o(a,M),o(a,b),C=!0},p(c,[g]){const H={};g&1&&(H.$$scope={dirty:g,ctx:c}),u.$set(H);const k={};g&1&&(k.$$scope={dirty:g,ctx:c}),$.$set(k)},i(c){C||(ae(u.$$.fragment,c),ae($.$$.fragment,c),C=!0)},o(c){se(u.$$.fragment,c),se($.$$.fragment,c),C=!1},d(c){c&&t(a),ne(u),ne($)}}}class vt extends Ve{constructor(a){super(),Je(this,a,null,ht,Qe,{})}}function gt(x){let a,p,u,h,$,M="Default (20px)",b,w,C,c,g="1×DPR (60px)",H,k,y,S,re="2×DPR (120px)",P,j,z,he,D,A='Comparing the canvas quality at different render sizes (<span class="dimmed">magnified to emphasize <em>crust.</em></span>)',U;const Q=[{size:20},{percent:x[0]},x[2]];let V={};for(let n=0;n<Q.length;n+=1)V=Ge(V,Q[n]);h=new Be({props:V});const N=[{size:60},{percent:x[0]},x[2]];let J={};for(let n=0;n<N.length;n+=1)J=Ge(J,N[n]);C=new Be({props:J});const R=[{size:120},{percent:x[0]},x[2]];let ve={};for(let n=0;n<R.length;n+=1)ve=Ge(ve,R[n]);y=new Be({props:ve});const W=[x[1]];function B(n){x[3](n)}let le={};for(let n=0;n<W.length;n+=1)le=Ge(le,W[n]);return x[0]!==void 0&&(le.value=x[0]),j=new ct({props:le}),ot.push(()=>ut(j,"value",B)),{c(){a=l("figure"),p=l("div"),u=l("figure"),Z(h.$$.fragment),$=l("figcaption"),$.textContent=M,b=d(),w=l("figure"),Z(C.$$.fragment),c=l("figcaption"),c.textContent=g,H=d(),k=l("figure"),Z(y.$$.fragment),S=l("figcaption"),S.textContent=re,P=d(),Z(j.$$.fragment),he=d(),D=l("figcaption"),D.innerHTML=A,this.h()},l(n){a=i(n,"FIGURE",{class:!0,role:!0});var f=L(a);p=i(f,"DIV",{class:!0});var F=L(p);u=i(F,"FIGURE",{class:!0});var G=L(u);ee(h.$$.fragment,G),$=i(G,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),_($)!=="svelte-z9i5lc"&&($.textContent=M),G.forEach(t),b=m(F),w=i(F,"FIGURE",{class:!0});var K=L(w);ee(C.$$.fragment,K),c=i(K,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),_(c)!=="svelte-frrpe1"&&(c.textContent=g),K.forEach(t),H=m(F),k=i(F,"FIGURE",{class:!0});var O=L(k);ee(y.$$.fragment,O),S=i(O,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),_(S)!=="svelte-nddsfz"&&(S.textContent=re),O.forEach(t),F.forEach(t),P=m(f),ee(j.$$.fragment,f),he=m(f),D=i(f,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),_(D)!=="svelte-dtxtwu"&&(D.innerHTML=A),f.forEach(t),this.h()},h(){v($,"class","svelte-9fj2vn"),v(u,"class","svelte-9fj2vn"),v(c,"class","svelte-9fj2vn"),v(w,"class","svelte-9fj2vn"),v(S,"class","svelte-9fj2vn"),v(k,"class","svelte-9fj2vn"),v(p,"class","radius-group figblock svelte-9fj2vn"),v(D,"class","caption svelte-9fj2vn"),v(a,"class","max-w svelte-9fj2vn"),v(a,"role","group")},m(n,f){r(n,a,f),o(a,p),o(p,u),te(h,u,null),o(u,$),o(p,b),o(p,w),te(C,w,null),o(w,c),o(p,H),o(p,k),te(y,k,null),o(k,S),o(a,P),te(j,a,null),o(a,he),o(a,D),U=!0},p(n,[f]){const F=f&5?Le(Q,[Q[0],f&1&&{percent:n[0]},f&4&&Re(n[2])]):{};h.$set(F);const G=f&5?Le(N,[N[0],f&1&&{percent:n[0]},f&4&&Re(n[2])]):{};C.$set(G);const K=f&5?Le(R,[R[0],f&1&&{percent:n[0]},f&4&&Re(n[2])]):{};y.$set(K);const O=f&2?Le(W,[Re(n[1])]):{};!z&&f&1&&(z=!0,O.value=n[0],pt(()=>z=!1)),j.$set(O)},i(n){U||(ae(h.$$.fragment,n),ae(C.$$.fragment,n),ae(y.$$.fragment,n),ae(j.$$.fragment,n),U=!0)},o(n){se(h.$$.fragment,n),se(C.$$.fragment,n),se(y.$$.fragment,n),se(j.$$.fragment,n),U=!1},d(n){n&&t(a),ne(h),ne(C),ne(y),ne(j)}}}function _t(x,a,p){const u={thumbColor:"var(--slate-blue-dim)",showNumber:!0,numSize:"var(--step--1)",step:"1",numColor:"var(--tx--1)"};let h=75;const $={use_decimal:!1,use_DPR:!1,fillSpace:!0,seeking:!0,bgColor:"none",colorFill:"#686766",colorStroke:"#8e8d8a44"};function M(b){h=b,p(0,h)}return[h,u,$,M]}class $t extends Ve{constructor(a){super(),Je(this,a,_t,gt,Qe,{})}}function bt(x){let a,p="<span>Gif Scrubber</span>",u,h,$=`An inline video player that acts as a drop-in alternative to <code data-type="ext">.gif</code>. It’s a pretty
	common pattern for ‘modernizing’, but I put a lot of time into adding a couple of additional progressive enhancements
	and thought it deserved a project page.`,M,b,w,C,c,g,H="Scrub Controls",k,y,S=`To keep everything minimal, mobile-friendly, and consistent across browsers, I decided to implement custom controls. A fixed button toggles play state and, when the container is grabbed, pointer\r
	events kick in to manage the timeline.`,re,P,j,z,he="s.t.",D,A,U,Q,V,N,J,R,ve="Progress indicator",W,B,le=`The graphic is <s>shamelessly ripped from</s> <em>inspired by</em> the iOS countdown timer—it&#39;s compact and
	conveys pretty much exactly what it does! I originally used an <code data-type="html">svg</code> but, despite <em>several</em> remakes, was never able to fix janky transforms.`,n,f,F,G,K="canvas",O,ie,Fe,De,be,oe,xe,pe,We=`I ended up doubling that (<em>i.e.</em> the rightmost canvas) to make it
	<em>super</em> crisp—<em>super</em> unnecessary! It <em>was</em> slightly sharper and there <em>wasn&#39;t</em> any noticeable
	impact on performance (only a single canvas is active/time), so I went with it.`,Ce,ye,we,fe,Ke="Format Considerations",ke,ue,Xe=`While the quality/compression benefits are great, using the component to replace the <em>_real_</em> format has a couple
	of tradeoffs:`,Ie,X,Ye="<li>controls require JS</li> <li>can&#39;t <em>hold-to-save</em> on mobile</li> <li>they aren&#39;t visible in reader mode</li> <li>playback support depends on browser + hardware features</li>",Te,ce,Ze=`To make a long story short, I address the last point by running a pre-build Python script to crawl my directory and
	generate <code data-type="ext">.webm</code> fallbacks where none exist. The magic <code data-type="ext">ffmpeg</code> command
	I use looks like this:`,He,Y,et=`<code class="svelte-1da2i09"><span>ffmpeg</span> -i [input].mp4 -movflags +faststart -pix_fmt yuv420p -c:v libvpx-vp9 -threads 8 -crf 40 -g 32 -deadline good -an [output].webm</code>
`,Pe,Ee,Me,E,Se,ge,tt="e.g.",ze,de,Ae,Oe,me,at=".h265",qe,_e,st="etc.",Ne,je;return b=new vt({}),oe=new $t({}),{c(){a=l("h1"),a.innerHTML=p,u=d(),h=l("p"),h.innerHTML=$,M=d(),Z(b.$$.fragment),w=d(),C=l("hr"),c=d(),g=l("h3"),g.textContent=H,k=d(),y=l("p"),y.textContent=S,re=d(),P=l("p"),j=I("I set it up "),z=l("em"),z.textContent=he,D=I(` moving a distance across the figure’s width is proportional to seeking that fraction\r
	of its video's duration. So to Red Blob Games for their in-depth article about\r
	`),A=l("a"),U=I("draggable objects"),Q=I(" and events —extremely helpful!"),V=d(),N=l("hr"),J=d(),R=l("h3"),R.textContent=ve,W=d(),B=l("p"),B.innerHTML=le,n=d(),f=l("p"),F=I("Porting it over to "),G=l("code"),G.textContent=K,O=I(` fixed that issue, but introduced another that gave it a\r
	blocky, aliased look on my phone. Thankfully, I learned browsers provide a fix for high dpi screens courtesy\r
	the `),ie=l("a"),Fe=I("device pixel ratio (DPR)"),De=I(", which can be queried and used as a resolution multiplier:"),be=d(),Z(oe.$$.fragment),xe=d(),pe=l("p"),pe.innerHTML=We,Ce=d(),ye=l("hr"),we=d(),fe=l("h3"),fe.textContent=Ke,ke=d(),ue=l("p"),ue.innerHTML=Xe,Ie=d(),X=l("ol"),X.innerHTML=Ye,Te=d(),ce=l("p"),ce.innerHTML=Ze,He=d(),Y=l("pre"),Y.innerHTML=et,Pe=d(),Ee=l("hr"),Me=d(),E=l("p"),Se=I("Getting to a point where the behavior felt predictable took a lot more effort than I expected ("),ge=l("em"),ge.textContent=tt,ze=d(),de=l("a"),Ae=I("safari media fragment hack"),Oe=I(", no "),me=l("code"),me.textContent=at,qe=I(` in\r
	FireFox, `),_e=l("em"),_e.textContent=st,Ne=I("), but I’m happy with how it turned out!"),this.h()},l(e){a=i(e,"H1",{"data-svelte-h":!0}),_(a)!=="svelte-16mbdpp"&&(a.innerHTML=p),u=m(e),h=i(e,"P",{"data-svelte-h":!0}),_(h)!=="svelte-1bz0svl"&&(h.innerHTML=$),M=m(e),ee(b.$$.fragment,e),w=m(e),C=i(e,"HR",{}),c=m(e),g=i(e,"H3",{"data-svelte-h":!0}),_(g)!=="svelte-1bkkyir"&&(g.textContent=H),k=m(e),y=i(e,"P",{"data-svelte-h":!0}),_(y)!=="svelte-1oow7l3"&&(y.textContent=S),re=m(e),P=i(e,"P",{});var s=L(P);j=T(s,"I set it up "),z=i(s,"EM",{"data-svelte-h":!0}),_(z)!=="svelte-hspnzd"&&(z.textContent=he),D=T(s,` moving a distance across the figure’s width is proportional to seeking that fraction\r
	of its video's duration. So to Red Blob Games for their in-depth article about\r
	`),A=i(s,"A",{href:!0,target:!0});var nt=L(A);U=T(nt,"draggable objects"),nt.forEach(t),Q=T(s," and events —extremely helpful!"),s.forEach(t),V=m(e),N=i(e,"HR",{}),J=m(e),R=i(e,"H3",{"data-svelte-h":!0}),_(R)!=="svelte-lxue3i"&&(R.textContent=ve),W=m(e),B=i(e,"P",{"data-svelte-h":!0}),_(B)!=="svelte-exw1aa"&&(B.innerHTML=le),n=m(e),f=i(e,"P",{});var $e=L(f);F=T($e,"Porting it over to "),G=i($e,"CODE",{"data-type":!0,"data-svelte-h":!0}),_(G)!=="svelte-jhma2z"&&(G.textContent=K),O=T($e,` fixed that issue, but introduced another that gave it a\r
	blocky, aliased look on my phone. Thankfully, I learned browsers provide a fix for high dpi screens courtesy\r
	the `),ie=i($e,"A",{href:!0,target:!0});var rt=L(ie);Fe=T(rt,"device pixel ratio (DPR)"),rt.forEach(t),De=T($e,", which can be queried and used as a resolution multiplier:"),$e.forEach(t),be=m(e),ee(oe.$$.fragment,e),xe=m(e),pe=i(e,"P",{"data-svelte-h":!0}),_(pe)!=="svelte-d8tjc7"&&(pe.innerHTML=We),Ce=m(e),ye=i(e,"HR",{}),we=m(e),fe=i(e,"H3",{"data-svelte-h":!0}),_(fe)!=="svelte-zo8yxa"&&(fe.textContent=Ke),ke=m(e),ue=i(e,"P",{"data-svelte-h":!0}),_(ue)!=="svelte-o65mgx"&&(ue.innerHTML=Xe),Ie=m(e),X=i(e,"OL",{role:!0,"data-svelte-h":!0}),_(X)!=="svelte-1je3con"&&(X.innerHTML=Ye),Te=m(e),ce=i(e,"P",{"data-svelte-h":!0}),_(ce)!=="svelte-1r2dh1s"&&(ce.innerHTML=Ze),He=m(e),Y=i(e,"PRE",{class:!0,"data-svelte-h":!0}),_(Y)!=="svelte-1wwy5vq"&&(Y.innerHTML=et),Pe=m(e),Ee=i(e,"HR",{}),Me=m(e),E=i(e,"P",{});var q=L(E);Se=T(q,"Getting to a point where the behavior felt predictable took a lot more effort than I expected ("),ge=i(q,"EM",{"data-svelte-h":!0}),_(ge)!=="svelte-2dbwd4"&&(ge.textContent=tt),ze=m(q),de=i(q,"A",{href:!0,target:!0});var lt=L(de);Ae=T(lt,"safari media fragment hack"),lt.forEach(t),Oe=T(q,", no "),me=i(q,"CODE",{"data-type":!0,"data-svelte-h":!0}),_(me)!=="svelte-1lul1jc"&&(me.textContent=at),qe=T(q,` in\r
	FireFox, `),_e=i(q,"EM",{"data-svelte-h":!0}),_(_e)!=="svelte-ynskcq"&&(_e.textContent=st),Ne=T(q,"), but I’m happy with how it turned out!"),q.forEach(t),this.h()},h(){v(A,"href",xt),v(A,"target",Ue),v(G,"data-type","html"),v(ie,"href",Ct),v(ie,"target",Ue),v(X,"role","list"),v(Y,"class","codeblock overflow-scrollbar max-w svelte-1da2i09"),v(de,"href",yt),v(de,"target",Ue),v(me,"data-type","ext")},m(e,s){r(e,a,s),r(e,u,s),r(e,h,s),r(e,M,s),te(b,e,s),r(e,w,s),r(e,C,s),r(e,c,s),r(e,g,s),r(e,k,s),r(e,y,s),r(e,re,s),r(e,P,s),o(P,j),o(P,z),o(P,D),o(P,A),o(A,U),o(P,Q),r(e,V,s),r(e,N,s),r(e,J,s),r(e,R,s),r(e,W,s),r(e,B,s),r(e,n,s),r(e,f,s),o(f,F),o(f,G),o(f,O),o(f,ie),o(ie,Fe),o(f,De),r(e,be,s),te(oe,e,s),r(e,xe,s),r(e,pe,s),r(e,Ce,s),r(e,ye,s),r(e,we,s),r(e,fe,s),r(e,ke,s),r(e,ue,s),r(e,Ie,s),r(e,X,s),r(e,Te,s),r(e,ce,s),r(e,He,s),r(e,Y,s),r(e,Pe,s),r(e,Ee,s),r(e,Me,s),r(e,E,s),o(E,Se),o(E,ge),o(E,ze),o(E,de),o(de,Ae),o(E,Oe),o(E,me),o(E,qe),o(E,_e),o(E,Ne),je=!0},p:ft,i(e){je||(ae(b.$$.fragment,e),ae(oe.$$.fragment,e),je=!0)},o(e){se(b.$$.fragment,e),se(oe.$$.fragment,e),je=!1},d(e){e&&(t(a),t(u),t(h),t(M),t(w),t(C),t(c),t(g),t(k),t(y),t(re),t(P),t(V),t(N),t(J),t(R),t(W),t(B),t(n),t(f),t(be),t(xe),t(pe),t(Ce),t(ye),t(we),t(fe),t(ke),t(ue),t(Ie),t(X),t(Te),t(ce),t(He),t(Y),t(Pe),t(Ee),t(Me),t(E)),ne(b,e),ne(oe,e)}}}const Ue="_blank",xt="https://www.redblobgames.com/making-of/draggable/",Ct="https://cloudinary.com/glossary/device-pixel-ratio",yt="https://muffinman.io/blog/hack-for-ios-safari-to-display-html-video-thumbnail/";class Pt extends Ve{constructor(a){super(),Je(this,a,null,bt,Qe,{})}}export{Pt as component};
