import{s as Qe,f as r,a as c,g as i,h as L,c as m,d as t,G as _,j as g,i as l,u as o,l as I,m as T,K as Ge,p as ot,T as pt,v as ft}from"../chunks/scheduler.6d6d93c7.js";import{S as Ve,i as Ke,b as Z,d as ee,m as te,a as ae,t as se,e as ne,j as ut}from"../chunks/index.15fe4709.js";import{G as it,R as Be}from"../chunks/Gif.1eded9e3.js";import{g as Le,a as Re}from"../chunks/spread.8a54911c.js";import{R as dt}from"../chunks/RangeSlider.ef5fca5b.js";function ct(x){let a;return{c(){a=I("Blender donut")},l(p){a=T(p,"Blender donut")},m(p,u){l(p,a,u)},d(p){p&&t(a)}}}function mt(x){let a;return{c(){a=I("Quick ttk on boss")},l(p){a=T(p,"Quick ttk on boss")},m(p,u){l(p,a,u)},d(p){p&&t(a)}}}function ht(x){let a,p,u,h,b,E,$,y=`Demo gifs: Tutorial Donut and gamer clip from my best 
		run of <a href="https://store.steampowered.com/app/1676130/Deadlink/" target="_blank">deadlink</a>.`,C;return u=new it({props:{src:"/media/projects/GifScrubber/blender_donut.mp4",height:"min(240px, 24vh)",radius_type:"combo left",$$slots:{caption:[ct]},$$scope:{ctx:x}}}),b=new it({props:{src:"/media/projects/GifScrubber/deadlink.mp4",height:"min(240px, 24vh)",t:"#t=1",autoplay:!1,controlsBg:"#0006",radius_type:"combo right",$$slots:{caption:[mt]},$$scope:{ctx:x}}}),{c(){a=r("figure"),p=r("div"),Z(u.$$.fragment),h=c(),Z(b.$$.fragment),E=c(),$=r("figcaption"),$.innerHTML=y,this.h()},l(d){a=i(d,"FIGURE",{class:!0,role:!0});var v=L(a);p=i(v,"DIV",{class:!0});var j=L(p);ee(u.$$.fragment,j),h=m(j),ee(b.$$.fragment,j),j.forEach(t),E=m(v),$=i(v,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),_($)!=="svelte-1s14123"&&($.innerHTML=y),v.forEach(t),this.h()},h(){g(p,"class","radius-group svelte-6cxl5a"),g($,"class","caption"),g(a,"class","max-w svelte-6cxl5a"),g(a,"role","group")},m(d,v){l(d,a,v),o(a,p),te(u,p,null),o(p,h),te(b,p,null),o(a,E),o(a,$),C=!0},p(d,[v]){const j={};v&1&&(j.$$scope={dirty:v,ctx:d}),u.$set(j);const k={};v&1&&(k.$$scope={dirty:v,ctx:d}),b.$set(k)},i(d){C||(ae(u.$$.fragment,d),ae(b.$$.fragment,d),C=!0)},o(d){se(u.$$.fragment,d),se(b.$$.fragment,d),C=!1},d(d){d&&t(a),ne(u),ne(b)}}}class gt extends Ve{constructor(a){super(),Ke(this,a,null,ht,Qe,{})}}function vt(x){let a,p,u,h,b,E="Default (20px)",$,y,C,d,v="1×DPR (60px)",j,k,w,S,le="2×DPR (120px)",H,P,z,he,D,A='Comparing the canvas quality at different render scales <span class="dimmed">(<em>magnified to emphasize crust</em>)</span>.',U;const Q=[{size:20},{percent:x[0]},x[2]];let V={};for(let n=0;n<Q.length;n+=1)V=Ge(V,Q[n]);h=new Be({props:V});const N=[{size:60},{percent:x[0]},x[2]];let K={};for(let n=0;n<N.length;n+=1)K=Ge(K,N[n]);C=new Be({props:K});const R=[{size:120},{percent:x[0]},x[2]];let ge={};for(let n=0;n<R.length;n+=1)ge=Ge(ge,R[n]);w=new Be({props:ge});const J=[x[1]];function B(n){x[3](n)}let re={};for(let n=0;n<J.length;n+=1)re=Ge(re,J[n]);return x[0]!==void 0&&(re.value=x[0]),P=new dt({props:re}),ot.push(()=>ut(P,"value",B)),{c(){a=r("figure"),p=r("div"),u=r("figure"),Z(h.$$.fragment),b=r("figcaption"),b.textContent=E,$=c(),y=r("figure"),Z(C.$$.fragment),d=r("figcaption"),d.textContent=v,j=c(),k=r("figure"),Z(w.$$.fragment),S=r("figcaption"),S.textContent=le,H=c(),Z(P.$$.fragment),he=c(),D=r("figcaption"),D.innerHTML=A,this.h()},l(n){a=i(n,"FIGURE",{class:!0,role:!0});var f=L(a);p=i(f,"DIV",{class:!0});var F=L(p);u=i(F,"FIGURE",{class:!0});var G=L(u);ee(h.$$.fragment,G),b=i(G,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),_(b)!=="svelte-z9i5lc"&&(b.textContent=E),G.forEach(t),$=m(F),y=i(F,"FIGURE",{class:!0});var W=L(y);ee(C.$$.fragment,W),d=i(W,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),_(d)!=="svelte-frrpe1"&&(d.textContent=v),W.forEach(t),j=m(F),k=i(F,"FIGURE",{class:!0});var O=L(k);ee(w.$$.fragment,O),S=i(O,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),_(S)!=="svelte-nddsfz"&&(S.textContent=le),O.forEach(t),F.forEach(t),H=m(f),ee(P.$$.fragment,f),he=m(f),D=i(f,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),_(D)!=="svelte-1i7h7ud"&&(D.innerHTML=A),f.forEach(t),this.h()},h(){g(b,"class","svelte-176f1jj"),g(u,"class","svelte-176f1jj"),g(d,"class","svelte-176f1jj"),g(y,"class","svelte-176f1jj"),g(S,"class","svelte-176f1jj"),g(k,"class","svelte-176f1jj"),g(p,"class","radius-group figblock box-shadow svelte-176f1jj"),g(D,"class","caption svelte-176f1jj"),g(a,"class","max-w svelte-176f1jj"),g(a,"role","group")},m(n,f){l(n,a,f),o(a,p),o(p,u),te(h,u,null),o(u,b),o(p,$),o(p,y),te(C,y,null),o(y,d),o(p,j),o(p,k),te(w,k,null),o(k,S),o(a,H),te(P,a,null),o(a,he),o(a,D),U=!0},p(n,[f]){const F=f&5?Le(Q,[Q[0],f&1&&{percent:n[0]},f&4&&Re(n[2])]):{};h.$set(F);const G=f&5?Le(N,[N[0],f&1&&{percent:n[0]},f&4&&Re(n[2])]):{};C.$set(G);const W=f&5?Le(R,[R[0],f&1&&{percent:n[0]},f&4&&Re(n[2])]):{};w.$set(W);const O=f&2?Le(J,[Re(n[1])]):{};!z&&f&1&&(z=!0,O.value=n[0],pt(()=>z=!1)),P.$set(O)},i(n){U||(ae(h.$$.fragment,n),ae(C.$$.fragment,n),ae(w.$$.fragment,n),ae(P.$$.fragment,n),U=!0)},o(n){se(h.$$.fragment,n),se(C.$$.fragment,n),se(w.$$.fragment,n),se(P.$$.fragment,n),U=!1},d(n){n&&t(a),ne(h),ne(C),ne(w),ne(P)}}}function _t(x,a,p){const u={thumbColor:"var(--slate-blue-dim)",showNumber:!0,numSize:"var(--step--1)",step:"1",numColor:"var(--tx--1)"};let h=75;const b={use_decimal:!1,use_DPR:!1,fillSpace:!0,seeking:!0,bgColor:"none",colorFill:"#686766",colorStroke:"#8e8d8a44"};function E($){h=$,p(0,h)}return[h,u,b,E]}class bt extends Ve{constructor(a){super(),Ke(this,a,_t,vt,Qe,{})}}function $t(x){let a,p="<span>Gif Scrubber</span>",u,h,b=`An inline video player that acts as a drop-in alternative to <code data-type="ext">GIFs</code>. It’s a pretty
	common pattern for ‘modernizing’ the old format, but I put a good chunk of time into getting it working how I wanted and added a couple progressive enhancements.`,E,$,y,C,d,v,j="Controls",k,w,S=`To keep everything minimal and mobile-friendly, I decided to make custom controls. A fixed button toggles play state and, when the container is grabbed, pointer\r
	events kick in to manage the timeline.`,le,H,P,z,he="s.t.",D,A,U,Q,V,N,K,R,ge="Progress indicator",J,B,re=`The graphic is <s>shamelessly ripped from</s> <em class="txt-shadow">inspired by</em> the iOS countdown widget—it&#39;s compact and
	conveys pretty much exactly what it&#39;s doing (loop + time). I originally used an <code data-type="html">svg</code> but, following <em>several</em> failed remakes, I wasn&#39;t able to figure out the cause of janky transforms.`,n,f,F,G,W="canvas",O,ie,Fe,De,$e,oe,xe,pe,Je=`I ended up doubling the dimensions (<em>i.e.</em> the rightmost canvas) to make it
	<em>super</em> crisp—<em>super</em> unnecessary! It <em>was</em> slightly sharper and there <em>wasn&#39;t</em> any noticeable
	impact on performance (only a single canvas is active/time), so I went with it.`,Ce,we,ye,fe,We="Media Support",ke,ue,Xe=`The quality/compression benefits are a no brainer, but using video to replace <em>_real_</em> gifs comes with couple
	of tradeoffs:`,Ie,X,Ye="<li>can&#39;t <em>hold-to-save</em> on mobile</li> <li>they aren&#39;t visible in reader mode</li> <li>playback support depends on browser + hardware features</li>",Te,de,Ze=`To make a long story short, I address the last point by running a pre-build Python script to crawl my directory and
	generate <code data-type="ext">.webm</code> fallbacks where none exist. My magic <code data-type="ext">ffmpeg</code> command
	looks like this:`,je,Y,et=`<code class="svelte-1da2i09"><span>ffmpeg</span> -i [input].mp4 -movflags +faststart -pix_fmt yuv420p -c:v libvpx-vp9 -threads 8 -crf 40 -g 32 -deadline good -an [output].webm</code>
`,He,Me,Ee,M,Se,ve,tt="e.g.",ze,ce,Ae,Oe,me,at=".h265",qe,_e,st="etc.",Ne,Pe;return $=new gt({}),oe=new bt({}),{c(){a=r("h1"),a.innerHTML=p,u=c(),h=r("p"),h.innerHTML=b,E=c(),Z($.$$.fragment),y=c(),C=r("hr"),d=c(),v=r("h3"),v.textContent=j,k=c(),w=r("p"),w.textContent=S,le=c(),H=r("p"),P=I("It's set up "),z=r("em"),z.textContent=he,D=I(` moving a distance across the figure’s width is proportional to seeking that fraction\r
	of its video's duration. So to Red Blob Games for their in-depth article about\r
	`),A=r("a"),U=I("draggable objects"),Q=I(" and events—extremely helpful!"),V=c(),N=r("hr"),K=c(),R=r("h3"),R.textContent=ge,J=c(),B=r("p"),B.innerHTML=re,n=c(),f=r("p"),F=I("Switching over to a "),G=r("code"),G.textContent=W,O=I(` fixed that issue, but introduced another that gave it a\r
	blocky, aliased look on my phone. Thankfully, I learned browsers provide a fix for high dpi screens courtesy\r
	the `),ie=r("a"),Fe=I("device pixel ratio (DPR)"),De=I(", which can be queried and used as a resolution multiplier:"),$e=c(),Z(oe.$$.fragment),xe=c(),pe=r("p"),pe.innerHTML=Je,Ce=c(),we=r("hr"),ye=c(),fe=r("h3"),fe.textContent=We,ke=c(),ue=r("p"),ue.innerHTML=Xe,Ie=c(),X=r("ol"),X.innerHTML=Ye,Te=c(),de=r("p"),de.innerHTML=Ze,je=c(),Y=r("pre"),Y.innerHTML=et,He=c(),Me=r("hr"),Ee=c(),M=r("p"),Se=I("Getting to a point where the behavior felt predictable took a lot more effort than I expected ("),ve=r("em"),ve.textContent=tt,ze=c(),ce=r("a"),Ae=I("safari media fragment hack"),Oe=I(", no "),me=r("code"),me.textContent=at,qe=I(` in\r
	FireFox, `),_e=r("em"),_e.textContent=st,Ne=I("), but I'm pretty happy with how it turned out :)"),this.h()},l(e){a=i(e,"H1",{"data-svelte-h":!0}),_(a)!=="svelte-16mbdpp"&&(a.innerHTML=p),u=m(e),h=i(e,"P",{"data-svelte-h":!0}),_(h)!=="svelte-13nes2b"&&(h.innerHTML=b),E=m(e),ee($.$$.fragment,e),y=m(e),C=i(e,"HR",{}),d=m(e),v=i(e,"H3",{"data-svelte-h":!0}),_(v)!=="svelte-pu7e26"&&(v.textContent=j),k=m(e),w=i(e,"P",{"data-svelte-h":!0}),_(w)!=="svelte-1csm726"&&(w.textContent=S),le=m(e),H=i(e,"P",{});var s=L(H);P=T(s,"It's set up "),z=i(s,"EM",{"data-svelte-h":!0}),_(z)!=="svelte-hspnzd"&&(z.textContent=he),D=T(s,` moving a distance across the figure’s width is proportional to seeking that fraction\r
	of its video's duration. So to Red Blob Games for their in-depth article about\r
	`),A=i(s,"A",{href:!0,target:!0});var nt=L(A);U=T(nt,"draggable objects"),nt.forEach(t),Q=T(s," and events—extremely helpful!"),s.forEach(t),V=m(e),N=i(e,"HR",{}),K=m(e),R=i(e,"H3",{"data-svelte-h":!0}),_(R)!=="svelte-lxue3i"&&(R.textContent=ge),J=m(e),B=i(e,"P",{"data-svelte-h":!0}),_(B)!=="svelte-18w68tt"&&(B.innerHTML=re),n=m(e),f=i(e,"P",{});var be=L(f);F=T(be,"Switching over to a "),G=i(be,"CODE",{"data-type":!0,"data-svelte-h":!0}),_(G)!=="svelte-jhma2z"&&(G.textContent=W),O=T(be,` fixed that issue, but introduced another that gave it a\r
	blocky, aliased look on my phone. Thankfully, I learned browsers provide a fix for high dpi screens courtesy\r
	the `),ie=i(be,"A",{href:!0,target:!0});var lt=L(ie);Fe=T(lt,"device pixel ratio (DPR)"),lt.forEach(t),De=T(be,", which can be queried and used as a resolution multiplier:"),be.forEach(t),$e=m(e),ee(oe.$$.fragment,e),xe=m(e),pe=i(e,"P",{"data-svelte-h":!0}),_(pe)!=="svelte-10d4d2w"&&(pe.innerHTML=Je),Ce=m(e),we=i(e,"HR",{}),ye=m(e),fe=i(e,"H3",{"data-svelte-h":!0}),_(fe)!=="svelte-ejqcuf"&&(fe.textContent=We),ke=m(e),ue=i(e,"P",{"data-svelte-h":!0}),_(ue)!=="svelte-1tltzol"&&(ue.innerHTML=Xe),Ie=m(e),X=i(e,"OL",{role:!0,"data-svelte-h":!0}),_(X)!=="svelte-31bwzl"&&(X.innerHTML=Ye),Te=m(e),de=i(e,"P",{"data-svelte-h":!0}),_(de)!=="svelte-c8brul"&&(de.innerHTML=Ze),je=m(e),Y=i(e,"PRE",{class:!0,"data-svelte-h":!0}),_(Y)!=="svelte-1wwy5vq"&&(Y.innerHTML=et),He=m(e),Me=i(e,"HR",{}),Ee=m(e),M=i(e,"P",{});var q=L(M);Se=T(q,"Getting to a point where the behavior felt predictable took a lot more effort than I expected ("),ve=i(q,"EM",{"data-svelte-h":!0}),_(ve)!=="svelte-2dbwd4"&&(ve.textContent=tt),ze=m(q),ce=i(q,"A",{href:!0,target:!0});var rt=L(ce);Ae=T(rt,"safari media fragment hack"),rt.forEach(t),Oe=T(q,", no "),me=i(q,"CODE",{"data-type":!0,"data-svelte-h":!0}),_(me)!=="svelte-1lul1jc"&&(me.textContent=at),qe=T(q,` in\r
	FireFox, `),_e=i(q,"EM",{"data-svelte-h":!0}),_(_e)!=="svelte-ynskcq"&&(_e.textContent=st),Ne=T(q,"), but I'm pretty happy with how it turned out :)"),q.forEach(t),this.h()},h(){g(A,"href",xt),g(A,"target",Ue),g(G,"data-type","html"),g(ie,"href",Ct),g(ie,"target",Ue),g(X,"role","list"),g(Y,"class","codeblock overflow-scrollbar max-w svelte-1da2i09"),g(ce,"href",wt),g(ce,"target",Ue),g(me,"data-type","ext")},m(e,s){l(e,a,s),l(e,u,s),l(e,h,s),l(e,E,s),te($,e,s),l(e,y,s),l(e,C,s),l(e,d,s),l(e,v,s),l(e,k,s),l(e,w,s),l(e,le,s),l(e,H,s),o(H,P),o(H,z),o(H,D),o(H,A),o(A,U),o(H,Q),l(e,V,s),l(e,N,s),l(e,K,s),l(e,R,s),l(e,J,s),l(e,B,s),l(e,n,s),l(e,f,s),o(f,F),o(f,G),o(f,O),o(f,ie),o(ie,Fe),o(f,De),l(e,$e,s),te(oe,e,s),l(e,xe,s),l(e,pe,s),l(e,Ce,s),l(e,we,s),l(e,ye,s),l(e,fe,s),l(e,ke,s),l(e,ue,s),l(e,Ie,s),l(e,X,s),l(e,Te,s),l(e,de,s),l(e,je,s),l(e,Y,s),l(e,He,s),l(e,Me,s),l(e,Ee,s),l(e,M,s),o(M,Se),o(M,ve),o(M,ze),o(M,ce),o(ce,Ae),o(M,Oe),o(M,me),o(M,qe),o(M,_e),o(M,Ne),Pe=!0},p:ft,i(e){Pe||(ae($.$$.fragment,e),ae(oe.$$.fragment,e),Pe=!0)},o(e){se($.$$.fragment,e),se(oe.$$.fragment,e),Pe=!1},d(e){e&&(t(a),t(u),t(h),t(E),t(y),t(C),t(d),t(v),t(k),t(w),t(le),t(H),t(V),t(N),t(K),t(R),t(J),t(B),t(n),t(f),t($e),t(xe),t(pe),t(Ce),t(we),t(ye),t(fe),t(ke),t(ue),t(Ie),t(X),t(Te),t(de),t(je),t(Y),t(He),t(Me),t(Ee),t(M)),ne($,e),ne(oe,e)}}}const Ue="_blank",xt="https://www.redblobgames.com/making-of/draggable/",Ct="https://cloudinary.com/glossary/device-pixel-ratio",wt="https://muffinman.io/blog/hack-for-ios-safari-to-display-html-video-thumbnail/";class Ht extends Ve{constructor(a){super(),Ke(this,a,null,$t,Qe,{})}}export{Ht as component};
