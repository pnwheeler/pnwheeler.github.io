import{s as $e,f as c,a as $,g as u,h as q,c as b,d as n,G as H,j as k,i as l,u as p,l as R,m as L,K as de,p as Le,S as Me,v as De}from"../chunks/scheduler.8d84c197.js";import{S as be,i as ye,b as O,d as N,m as Q,a as U,t as V,e as W,j as Ge}from"../chunks/index.5e028736.js";import{G as Pe,R as _e}from"../chunks/Gif.582eaa8e.js";import{g as ce,a as ue}from"../chunks/spread.8a54911c.js";import{R as Ee}from"../chunks/RangeSlider.00a7ad4c.js";function Se(h){let a;return{c(){a=R("Blender donut")},l(s){a=L(s,"Blender donut")},m(s,i){l(s,a,i)},d(s){s&&n(a)}}}function je(h){let a;return{c(){a=R("Quick ttk on boss")},l(s){a=L(s,"Quick ttk on boss")},m(s,i){l(s,a,i)},d(s){s&&n(a)}}}function ze(h){let a,s,i,v,g,x,o,I=`Demo gifs: Tutorial Donut and gamer clip from my best 
		run of <a href="https://store.steampowered.com/app/1676130/Deadlink/" target="_blank">deadlink</a>.`,_;return i=new Pe({props:{src:"/media/projects/GifScrubber/blender_donut.mp4",height:"min(240px, 24vh)",radius_type:"combo left",$$slots:{caption:[Se]},$$scope:{ctx:h}}}),g=new Pe({props:{src:"/media/projects/GifScrubber/deadlink.mp4",height:"min(240px, 24vh)",t:"#t=1",autoplay:!1,controlsBg:"#0006",radius_type:"combo right",$$slots:{caption:[je]},$$scope:{ctx:h}}}),{c(){a=c("figure"),s=c("div"),O(i.$$.fragment),v=$(),O(g.$$.fragment),x=$(),o=c("figcaption"),o.innerHTML=I,this.h()},l(f){a=u(f,"FIGURE",{class:!0,role:!0});var m=q(a);s=u(m,"DIV",{class:!0});var y=q(s);N(i.$$.fragment,y),v=b(y),N(g.$$.fragment,y),y.forEach(n),x=b(m),o=u(m,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),H(o)!=="svelte-1s14123"&&(o.innerHTML=I),m.forEach(n),this.h()},h(){k(s,"class","svelte-o0m8eb"),k(o,"class","caption"),k(a,"class","max-w svelte-o0m8eb"),k(a,"role","group")},m(f,m){l(f,a,m),p(a,s),Q(i,s,null),p(s,v),Q(g,s,null),p(a,x),p(a,o),_=!0},p(f,[m]){const y={};m&1&&(y.$$scope={dirty:m,ctx:f}),i.$set(y);const M={};m&1&&(M.$$scope={dirty:m,ctx:f}),g.$set(M)},i(f){_||(U(i.$$.fragment,f),U(g.$$.fragment,f),_=!0)},o(f){V(i.$$.fragment,f),V(g.$$.fragment,f),_=!1},d(f){f&&n(a),W(i),W(g)}}}class Be extends be{constructor(a){super(),ye(this,a,null,ze,$e,{})}}function Ae(h){let a,s,i,v,g,x,o,I,_,f,m,y,M=`Comparing canvas quality at different render scales (simulated DPR=3). From left: no scaling (<em>20px</em>), 1×DPR
		(<em>60px</em>), and 2×DPR (<em>120px</em>).`,C;const E=[{size:20},{percent:h[0]},h[2]];let P={};for(let t=0;t<E.length;t+=1)P=de(P,E[t]);i=new _e({props:P});const S=[{size:60},{percent:h[0]},h[2]];let K={};for(let t=0;t<S.length;t+=1)K=de(K,S[t]);g=new _e({props:K});const G=[{size:120},{percent:h[0]},h[2]];let j={};for(let t=0;t<G.length;t+=1)j=de(j,G[t]);o=new _e({props:j});const z=[h[1]];function w(t){h[3](t)}let B={};for(let t=0;t<z.length;t+=1)B=de(B,z[t]);return h[0]!==void 0&&(B.value=h[0]),_=new Ee({props:B}),Le.push(()=>Ge(_,"value",w)),{c(){a=c("figure"),s=c("div"),O(i.$$.fragment),v=$(),O(g.$$.fragment),x=$(),O(o.$$.fragment),I=$(),O(_.$$.fragment),m=$(),y=c("figcaption"),y.innerHTML=M,this.h()},l(t){a=u(t,"FIGURE",{class:!0,role:!0});var d=q(a);s=u(d,"DIV",{class:!0});var T=q(s);N(i.$$.fragment,T),v=b(T),N(g.$$.fragment,T),x=b(T),N(o.$$.fragment,T),T.forEach(n),I=b(d),N(_.$$.fragment,d),m=b(d),y=u(d,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),H(y)!=="svelte-49f377"&&(y.innerHTML=M),d.forEach(n),this.h()},h(){k(s,"class","radius examples svelte-1k63f46"),k(y,"class","caption"),k(a,"class","max-w svelte-1k63f46"),k(a,"role","group")},m(t,d){l(t,a,d),p(a,s),Q(i,s,null),p(s,v),Q(g,s,null),p(s,x),Q(o,s,null),p(a,I),Q(_,a,null),p(a,m),p(a,y),C=!0},p(t,[d]){const T=d&5?ce(E,[E[0],d&1&&{percent:t[0]},d&4&&ue(t[2])]):{};i.$set(T);const A=d&5?ce(S,[S[0],d&1&&{percent:t[0]},d&4&&ue(t[2])]):{};g.$set(A);const ne=d&5?ce(G,[G[0],d&1&&{percent:t[0]},d&4&&ue(t[2])]):{};o.$set(ne);const ae=d&2?ce(z,[ue(t[1])]):{};!f&&d&1&&(f=!0,ae.value=t[0],Me(()=>f=!1)),_.$set(ae)},i(t){C||(U(i.$$.fragment,t),U(g.$$.fragment,t),U(o.$$.fragment,t),U(_.$$.fragment,t),C=!0)},o(t){V(i.$$.fragment,t),V(g.$$.fragment,t),V(o.$$.fragment,t),V(_.$$.fragment,t),C=!1},d(t){t&&n(a),W(i),W(g),W(o),W(_)}}}function Fe(h,a,s){const i={thumbColor:"var(--slate-blue-dim)",showNumber:!0,numSize:"var(--step--1)",step:"1",numColor:"var(--color-caption)"};let v=25;const g={use_decimal:!1,use_DPR:!1,fillSpace:!0,seeking:!0,bgColor:"none"};function x(o){v=o,s(0,v)}return[v,i,g,x]}class qe extends be{constructor(a){super(),ye(this,a,Fe,Ae,$e,{})}}function Oe(h){let a,s="<span>Gif Scrubber</span>",i,v,g=`An inline video player with custom controls. I made this component in the process of updating my website to have a
	more flexible way to handle media and avoid the headache of trying to optimize <em>real</em> gifs.`,x,o,I,_,f,m,y=`To keep it minimal and mobile-friendly, I stuck an always-visible playback <code data-type="html">button</code> on the
	corner and use a couple of pointer events to manage timeline scrubbing.`,M,C,E,P,S,K,G,j,z,w,B,t,d="svg",T,A,ne="many",ae,J,we="canvas",ge,X,he,ve,se,Y,re,Z,ke=`I scaled it by another factor of 2 (<em>i.e.</em> the rightmost canvas) to make it <em>super</em> crisp—<em>super</em>
	unnecessary! But it <em>was</em> slightly sharper, and didn&#39;t have a noticeable impact on performance, so I went with it.`,le,ie,oe,ee,xe=`<strong>TLDR</strong>: Trying to guarantee compatibility on a single <code data-type="ext">src</code> is hard. Browser + hardware support fragmentation. I
	ended up writing a Python script to backfill each <code data-type="ext">.mp4</code> with
	<code data-type="ext">.webm</code> before building. The magic ffmpeg command looks like this:`,pe,F,Ce=`<code class="svelte-4db74d"><span>ffmpeg</span> -i [input] -movflags +faststart -pix_fmt yuv420p -c:v libvpx-vp9 -threads 8 -crf 40 -g 32 -deadline good -an [output]</code>
`,fe,te,Te=`Getting it to work consistently was a lot more involved and hacky than I hoped, but I'm pretty happy with how it\r
	turned out.`,me;return o=new Be({}),Y=new qe({}),{c(){a=c("h1"),a.innerHTML=s,i=$(),v=c("p"),v.innerHTML=g,x=$(),O(o.$$.fragment),I=$(),_=c("hr"),f=$(),m=c("p"),m.innerHTML=y,M=$(),C=c("p"),E=R(`It's set up so moving a distance across the container's width is proportional to seeking that fraction of the video's\r
	duration. Huge s/o to Red Blob Games for their in-depth article about `),P=c("a"),S=R("draggable objects"),K=R(", extremely helpful!"),G=$(),j=c("hr"),z=$(),w=c("p"),B=R("I originally made the progress indicator with an "),t=c("code"),t.textContent=d,T=R(" but, after "),A=c("em"),A.textContent=ne,ae=R(` failed\r
	attempts at fixing transform jank, scrapped it for a\r
	`),J=c("code"),J.textContent=we,ge=R(`. Without any adjustments, it'll look blocky and pixelated on high-dpi screens.\r
	That's fixed by multiplying the base resolution by the `),X=c("a"),he=R("device pixel ratio (DPR)"),ve=R(`, and\r
	normalizing the area with CSS:`),se=$(),O(Y.$$.fragment),re=$(),Z=c("p"),Z.innerHTML=ke,le=$(),ie=c("hr"),oe=$(),ee=c("p"),ee.innerHTML=xe,pe=$(),F=c("pre"),F.innerHTML=Ce,fe=$(),te=c("p"),te.textContent=Te,this.h()},l(e){a=u(e,"H1",{"data-svelte-h":!0}),H(a)!=="svelte-16mbdpp"&&(a.innerHTML=s),i=b(e),v=u(e,"P",{"data-svelte-h":!0}),H(v)!=="svelte-1gwt0bf"&&(v.innerHTML=g),x=b(e),N(o.$$.fragment,e),I=b(e),_=u(e,"HR",{}),f=b(e),m=u(e,"P",{"data-svelte-h":!0}),H(m)!=="svelte-3bkcyd"&&(m.innerHTML=y),M=b(e),C=u(e,"P",{});var r=q(C);E=L(r,`It's set up so moving a distance across the container's width is proportional to seeking that fraction of the video's\r
	duration. Huge s/o to Red Blob Games for their in-depth article about `),P=u(r,"A",{href:!0,target:!0});var He=q(P);S=L(He,"draggable objects"),He.forEach(n),K=L(r,", extremely helpful!"),r.forEach(n),G=b(e),j=u(e,"HR",{}),z=b(e),w=u(e,"P",{});var D=q(w);B=L(D,"I originally made the progress indicator with an "),t=u(D,"CODE",{"data-type":!0,"data-svelte-h":!0}),H(t)!=="svelte-mflvan"&&(t.textContent=d),T=L(D," but, after "),A=u(D,"EM",{"data-svelte-h":!0}),H(A)!=="svelte-q8yrbd"&&(A.textContent=ne),ae=L(D,` failed\r
	attempts at fixing transform jank, scrapped it for a\r
	`),J=u(D,"CODE",{"data-type":!0,"data-svelte-h":!0}),H(J)!=="svelte-jhma2z"&&(J.textContent=we),ge=L(D,`. Without any adjustments, it'll look blocky and pixelated on high-dpi screens.\r
	That's fixed by multiplying the base resolution by the `),X=u(D,"A",{href:!0,target:!0});var Ie=q(X);he=L(Ie,"device pixel ratio (DPR)"),Ie.forEach(n),ve=L(D,`, and\r
	normalizing the area with CSS:`),D.forEach(n),se=b(e),N(Y.$$.fragment,e),re=b(e),Z=u(e,"P",{"data-svelte-h":!0}),H(Z)!=="svelte-17v1voq"&&(Z.innerHTML=ke),le=b(e),ie=u(e,"HR",{}),oe=b(e),ee=u(e,"P",{"data-svelte-h":!0}),H(ee)!=="svelte-5ni8uu"&&(ee.innerHTML=xe),pe=b(e),F=u(e,"PRE",{class:!0,"data-svelte-h":!0}),H(F)!=="svelte-al91pe"&&(F.innerHTML=Ce),fe=b(e),te=u(e,"P",{"data-svelte-h":!0}),H(te)!=="svelte-nee5zp"&&(te.textContent=Te),this.h()},h(){k(P,"href",Ne),k(P,"target",Re),k(t,"data-type","html"),k(J,"data-type","html"),k(X,"href",Qe),k(X,"target",Re),k(F,"class","codeblock overflow-scrollbar svelte-4db74d")},m(e,r){l(e,a,r),l(e,i,r),l(e,v,r),l(e,x,r),Q(o,e,r),l(e,I,r),l(e,_,r),l(e,f,r),l(e,m,r),l(e,M,r),l(e,C,r),p(C,E),p(C,P),p(P,S),p(C,K),l(e,G,r),l(e,j,r),l(e,z,r),l(e,w,r),p(w,B),p(w,t),p(w,T),p(w,A),p(w,ae),p(w,J),p(w,ge),p(w,X),p(X,he),p(w,ve),l(e,se,r),Q(Y,e,r),l(e,re,r),l(e,Z,r),l(e,le,r),l(e,ie,r),l(e,oe,r),l(e,ee,r),l(e,pe,r),l(e,F,r),l(e,fe,r),l(e,te,r),me=!0},p:De,i(e){me||(U(o.$$.fragment,e),U(Y.$$.fragment,e),me=!0)},o(e){V(o.$$.fragment,e),V(Y.$$.fragment,e),me=!1},d(e){e&&(n(a),n(i),n(v),n(x),n(I),n(_),n(f),n(m),n(M),n(C),n(G),n(j),n(z),n(w),n(se),n(re),n(Z),n(le),n(ie),n(oe),n(ee),n(pe),n(F),n(fe),n(te)),W(o,e),W(Y,e)}}}const Re="_blank",Ne="https://www.redblobgames.com/making-of/draggable/",Qe="https://cloudinary.com/glossary/device-pixel-ratio";class Xe extends be{constructor(a){super(),ye(this,a,null,Oe,$e,{})}}export{Xe as component};
