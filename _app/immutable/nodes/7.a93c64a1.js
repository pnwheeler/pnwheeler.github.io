import{s as $e,f as c,a as $,g as d,h as N,c as b,d as s,G as I,j as k,i as l,u as p,l as R,m as M,I as me,p as Me,S as De,v as Ee}from"../chunks/scheduler.1a83071e.js";import{S as be,i as ye,b as O,d as q,m as Q,a as U,t as V,e as W,j as Ge}from"../chunks/index.98f22588.js";import{G as Te,R as _e}from"../chunks/Gif.2c0f55f8.js";import{g as ce,a as de}from"../chunks/spread.8a54911c.js";import{R as Le}from"../chunks/RangeSlider.3e770989.js";function Se(h){let a;return{c(){a=R("Blender donut")},l(n){a=M(n,"Blender donut")},m(n,i){l(n,a,i)},d(n){n&&s(a)}}}function ze(h){let a;return{c(){a=R("Quick ttk on boss")},l(n){a=M(n,"Quick ttk on boss")},m(n,i){l(n,a,i)},d(n){n&&s(a)}}}function je(h){let a,n,i,v,g,C,o,P=`Demo gifs: Tutorial Donut and gamer clip from my best 
		run of <a href="https://store.steampowered.com/app/1676130/Deadlink/" target="_blank">deadlink</a>.`,_;return i=new Te({props:{src:"/media/projects/GifScrubber/blender_donut.mp4",height:"min(240px, 24vh)",autoplay:!1,radius_type:"combo left",$$slots:{caption:[Se]},$$scope:{ctx:h}}}),g=new Te({props:{src:"/media/projects/GifScrubber/deadlink.mp4",height:"min(240px, 24vh)",controlsBg:"#0006",radius_type:"combo right",$$slots:{caption:[ze]},$$scope:{ctx:h}}}),{c(){a=c("figure"),n=c("div"),O(i.$$.fragment),v=$(),O(g.$$.fragment),C=$(),o=c("figcaption"),o.innerHTML=P,this.h()},l(f){a=d(f,"FIGURE",{class:!0,role:!0});var u=N(a);n=d(u,"DIV",{class:!0});var y=N(n);q(i.$$.fragment,y),v=b(y),q(g.$$.fragment,y),y.forEach(s),C=b(u),o=d(u,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),I(o)!=="svelte-1s14123"&&(o.innerHTML=P),u.forEach(s),this.h()},h(){k(n,"class","svelte-o0m8eb"),k(o,"class","caption"),k(a,"class","max-w svelte-o0m8eb"),k(a,"role","group")},m(f,u){l(f,a,u),p(a,n),Q(i,n,null),p(n,v),Q(g,n,null),p(a,C),p(a,o),_=!0},p(f,[u]){const y={};u&1&&(y.$$scope={dirty:u,ctx:f}),i.$set(y);const D={};u&1&&(D.$$scope={dirty:u,ctx:f}),g.$set(D)},i(f){_||(U(i.$$.fragment,f),U(g.$$.fragment,f),_=!0)},o(f){V(i.$$.fragment,f),V(g.$$.fragment,f),_=!1},d(f){f&&s(a),W(i),W(g)}}}class Ae extends be{constructor(a){super(),ye(this,a,null,je,$e,{})}}function Be(h){let a,n,i,v,g,C,o,P,_,f,u,y,D=`Comparing canvas quality at different render scales (simulated DPR=3). From left: no scaling (20px), 1×DPR\r
		(60px), and 2×DPR (120px).`,x;const S=[{size:20},{percent:h[0]},h[2]];let T={};for(let t=0;t<S.length;t+=1)T=me(T,S[t]);i=new _e({props:T});const z=[{size:60},{percent:h[0]},h[2]];let J={};for(let t=0;t<z.length;t+=1)J=me(J,z[t]);g=new _e({props:J});const G=[{size:120},{percent:h[0]},h[2]];let j={};for(let t=0;t<G.length;t+=1)j=me(j,G[t]);o=new _e({props:j});const A=[h[1]];function w(t){h[3](t)}let B={};for(let t=0;t<A.length;t+=1)B=me(B,A[t]);return h[0]!==void 0&&(B.value=h[0]),_=new Le({props:B}),Me.push(()=>Ge(_,"value",w)),{c(){a=c("figure"),n=c("div"),O(i.$$.fragment),v=$(),O(g.$$.fragment),C=$(),O(o.$$.fragment),P=$(),O(_.$$.fragment),u=$(),y=c("figcaption"),y.textContent=D,this.h()},l(t){a=d(t,"FIGURE",{class:!0});var m=N(a);n=d(m,"DIV",{class:!0});var H=N(n);q(i.$$.fragment,H),v=b(H),q(g.$$.fragment,H),C=b(H),q(o.$$.fragment,H),H.forEach(s),P=b(m),q(_.$$.fragment,m),u=b(m),y=d(m,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),I(y)!=="svelte-kxdp0i"&&(y.textContent=D),m.forEach(s),this.h()},h(){k(n,"class","radius"),k(y,"class","caption"),k(a,"class","max-w svelte-7z63kp")},m(t,m){l(t,a,m),p(a,n),Q(i,n,null),p(n,v),Q(g,n,null),p(n,C),Q(o,n,null),p(a,P),Q(_,a,null),p(a,u),p(a,y),x=!0},p(t,[m]){const H=m&5?ce(S,[S[0],m&1&&{percent:t[0]},m&4&&de(t[2])]):{};i.$set(H);const L=m&5?ce(z,[z[0],m&1&&{percent:t[0]},m&4&&de(t[2])]):{};g.$set(L);const se=m&5?ce(G,[G[0],m&1&&{percent:t[0]},m&4&&de(t[2])]):{};o.$set(se);const te=m&2?ce(A,[de(t[1])]):{};!f&&m&1&&(f=!0,te.value=t[0],De(()=>f=!1)),_.$set(te)},i(t){x||(U(i.$$.fragment,t),U(g.$$.fragment,t),U(o.$$.fragment,t),U(_.$$.fragment,t),x=!0)},o(t){V(i.$$.fragment,t),V(g.$$.fragment,t),V(o.$$.fragment,t),V(_.$$.fragment,t),x=!1},d(t){t&&s(a),W(i),W(g),W(o),W(_)}}}function Fe(h,a,n){const i={thumbColor:"var(--slate-blue-dim)",showNumber:!0,numSize:"var(--step--1)",step:"1",numColor:"var(--color-caption)"};let v=85;const g={use_decimal:!1,use_DPR:!1,fillSpace:!0,seeking:!0,bgColor:"none"};function C(o){v=o,n(0,v)}return[v,i,g,C]}class Ne extends be{constructor(a){super(),ye(this,a,Fe,Be,$e,{})}}function Oe(h){let a,n="<span>Gif Scrubber</span>",i,v,g=`A custom inline video player with drag controls. I made this component in the process of updating my website to have a
	more flexible way to handle media and avoid the headache of trying to optimize <em>real</em> gifs.`,C,o,P,_,f,u,y=`To keep it minimal and mobile-friendly, I stuck an always-visible playback <code data-type="html">button</code> on the
	corner and use a couple of pointer events to manage timeline scrubbing.`,D,x,S,T,z,J,G,j,A,w,B,t,m="svg",H,L,se="canvas",te,ae,we="several",ge,K,he,ve,ne,X,re,Y,Ce=`I used a factor of 2×DPR (<em>i.e.</em> the last one) to make it <em>super</em> crisp: <em>super</em>
	unnecessary! It <em>was</em> slightly sharper and didn&#39;t have a noticeable impact on performance, so I went with it.`,le,ie,oe,Z,ke=`Never realized that it&#39;d be nearly impossible to rely on a single video source (<em>using any codec less than two decades old</em>)
	without breaking compatibility in at least one major browser. Ended up writing a Python script to backfill every mp4 with WebM
	before building. Magic ffmpeg command:`,pe,F,xe=`<code class="svelte-syby6g"><span>ffmpeg</span> -i [input] -movflags +faststart -pix_fmt yuv420p -c:v libvpx-vp9 -threads 8 -crf 40 -g 32 -deadline good -an [output]</code>
`,fe,ee,He="Getting it to work consistently was a lot more involved and hacky than I hoped, but I'm pretty happy with how it turned out.",ue;return o=new Ae({}),X=new Ne({}),{c(){a=c("h1"),a.innerHTML=n,i=$(),v=c("p"),v.innerHTML=g,C=$(),O(o.$$.fragment),P=$(),_=c("hr"),f=$(),u=c("p"),u.innerHTML=y,D=$(),x=c("p"),S=R(`It's set up so moving a distance across the container's width is proportional to seeking that fraction of the video's\r
	duration. Huge s/o to Red Blob Games for their in-depth article about `),T=c("a"),z=R("draggable objects"),J=R(", extremely helpful!"),G=$(),j=c("hr"),A=$(),w=c("p"),B=R("I originally planned on using an "),t=c("code"),t.textContent=m,H=R(` for the progress indicator, but scrapped it for a\r
	`),L=c("code"),L.textContent=se,te=R(" after "),ae=c("em"),ae.textContent=we,ge=R(` failed attempts at fixing transform jank. To prevent\r
	pixelation on high-dpi screens, the base resolution is scaled up by the\r
	`),K=c("a"),he=R("device pixel ratio (DPR)"),ve=R(" before its area is brought back down with CSS."),ne=$(),O(X.$$.fragment),re=$(),Y=c("p"),Y.innerHTML=Ce,le=$(),ie=c("hr"),oe=$(),Z=c("p"),Z.innerHTML=ke,pe=$(),F=c("pre"),F.innerHTML=xe,fe=$(),ee=c("p"),ee.textContent=He,this.h()},l(e){a=d(e,"H1",{"data-svelte-h":!0}),I(a)!=="svelte-16mbdpp"&&(a.innerHTML=n),i=b(e),v=d(e,"P",{"data-svelte-h":!0}),I(v)!=="svelte-1msuz6r"&&(v.innerHTML=g),C=b(e),q(o.$$.fragment,e),P=b(e),_=d(e,"HR",{}),f=b(e),u=d(e,"P",{"data-svelte-h":!0}),I(u)!=="svelte-3bkcyd"&&(u.innerHTML=y),D=b(e),x=d(e,"P",{});var r=N(x);S=M(r,`It's set up so moving a distance across the container's width is proportional to seeking that fraction of the video's\r
	duration. Huge s/o to Red Blob Games for their in-depth article about `),T=d(r,"A",{href:!0,target:!0});var Ie=N(T);z=M(Ie,"draggable objects"),Ie.forEach(s),J=M(r,", extremely helpful!"),r.forEach(s),G=b(e),j=d(e,"HR",{}),A=b(e),w=d(e,"P",{});var E=N(w);B=M(E,"I originally planned on using an "),t=d(E,"CODE",{"data-type":!0,"data-svelte-h":!0}),I(t)!=="svelte-mflvan"&&(t.textContent=m),H=M(E,` for the progress indicator, but scrapped it for a\r
	`),L=d(E,"CODE",{"data-type":!0,"data-svelte-h":!0}),I(L)!=="svelte-jhma2z"&&(L.textContent=se),te=M(E," after "),ae=d(E,"EM",{"data-svelte-h":!0}),I(ae)!=="svelte-znumgi"&&(ae.textContent=we),ge=M(E,` failed attempts at fixing transform jank. To prevent\r
	pixelation on high-dpi screens, the base resolution is scaled up by the\r
	`),K=d(E,"A",{href:!0,target:!0});var Pe=N(K);he=M(Pe,"device pixel ratio (DPR)"),Pe.forEach(s),ve=M(E," before its area is brought back down with CSS."),E.forEach(s),ne=b(e),q(X.$$.fragment,e),re=b(e),Y=d(e,"P",{"data-svelte-h":!0}),I(Y)!=="svelte-17vxdi"&&(Y.innerHTML=Ce),le=b(e),ie=d(e,"HR",{}),oe=b(e),Z=d(e,"P",{"data-svelte-h":!0}),I(Z)!=="svelte-1tzok2a"&&(Z.innerHTML=ke),pe=b(e),F=d(e,"PRE",{class:!0,"data-svelte-h":!0}),I(F)!=="svelte-165br3l"&&(F.innerHTML=xe),fe=b(e),ee=d(e,"P",{"data-svelte-h":!0}),I(ee)!=="svelte-1z0us8i"&&(ee.textContent=He),this.h()},h(){k(T,"href",qe),k(T,"target",Re),k(t,"data-type","html"),k(L,"data-type","html"),k(K,"href",Qe),k(K,"target",Re),k(F,"class","codeblock overflowscrollbar svelte-syby6g")},m(e,r){l(e,a,r),l(e,i,r),l(e,v,r),l(e,C,r),Q(o,e,r),l(e,P,r),l(e,_,r),l(e,f,r),l(e,u,r),l(e,D,r),l(e,x,r),p(x,S),p(x,T),p(T,z),p(x,J),l(e,G,r),l(e,j,r),l(e,A,r),l(e,w,r),p(w,B),p(w,t),p(w,H),p(w,L),p(w,te),p(w,ae),p(w,ge),p(w,K),p(K,he),p(w,ve),l(e,ne,r),Q(X,e,r),l(e,re,r),l(e,Y,r),l(e,le,r),l(e,ie,r),l(e,oe,r),l(e,Z,r),l(e,pe,r),l(e,F,r),l(e,fe,r),l(e,ee,r),ue=!0},p:Ee,i(e){ue||(U(o.$$.fragment,e),U(X.$$.fragment,e),ue=!0)},o(e){V(o.$$.fragment,e),V(X.$$.fragment,e),ue=!1},d(e){e&&(s(a),s(i),s(v),s(C),s(P),s(_),s(f),s(u),s(D),s(x),s(G),s(j),s(A),s(w),s(ne),s(re),s(Y),s(le),s(ie),s(oe),s(Z),s(pe),s(F),s(fe),s(ee)),W(o,e),W(X,e)}}}const Re="_blank",qe="https://www.redblobgames.com/making-of/draggable/",Qe="https://cloudinary.com/glossary/device-pixel-ratio";class Xe extends be{constructor(a){super(),ye(this,a,null,Oe,$e,{})}}export{Xe as component};
