import{s as qe,f as p,a as C,g as f,h as E,c as k,d as s,G as T,j as $,i as c,u,l as H,m as P,K as $e,p as ht,T as gt,e as ot,v as ct,x as vt,o as _t,N as pt,n as bt}from"../chunks/scheduler.15fae3ce.js";import{S as Fe,i as ze,b as U,d as V,m as Q,a as K,t as J,e as W,j as $t}from"../chunks/index.884423c8.js";import{g as xe,a as ye}from"../chunks/spread.8a54911c.js";import{G as ft,R as We}from"../chunks/Gif.b3f8c856.js";import{R as xt}from"../chunks/RangeSlider.949214af.js";import{e as ut}from"../chunks/each.e59479a4.js";function yt(g){let t;return{c(){t=H("Blender donut")},l(l){t=P(l,"Blender donut")},m(l,a){c(l,t,a)},d(l){l&&s(t)}}}function Ct(g){let t;return{c(){t=H("Quick ttk on boss")},l(l){t=P(l,"Quick ttk on boss")},m(l,a){c(l,t,a)},d(l){l&&s(t)}}}function kt(g){let t,l,a,m,d,v,_,x=`Demo gifs: Tutorial Donut and gamer clip from my best 
		run of <a href="https://store.steampowered.com/app/1676130/Deadlink/" target="_blank">deadlink</a>.`,w;return a=new ft({props:{src:"/media/projects/GifScrubber/blender_donut.mp4",height:"min(240px, 45vw)",radius_type:"combo left",$$slots:{caption:[yt]},$$scope:{ctx:g}}}),d=new ft({props:{src:"/media/projects/GifScrubber/deadlink.mp4",height:"min(240px, 45vw)",t:"#t=1",autoplay:!1,controlsBg:"#0006",radius_type:"combo right",$$slots:{caption:[Ct]},$$scope:{ctx:g}}}),{c(){t=p("figure"),l=p("div"),U(a.$$.fragment),m=C(),U(d.$$.fragment),v=C(),_=p("figcaption"),_.innerHTML=x,this.h()},l(r){t=f(r,"FIGURE",{class:!0,role:!0});var i=E(t);l=f(i,"DIV",{class:!0});var y=E(l);V(a.$$.fragment,y),m=k(y),V(d.$$.fragment,y),y.forEach(s),v=k(i),_=f(i,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),T(_)!=="svelte-1s14123"&&(_.innerHTML=x),i.forEach(s),this.h()},h(){$(l,"class","radius-group svelte-1csiu57"),$(_,"class","caption"),$(t,"class","max-w svelte-1csiu57"),$(t,"role","group")},m(r,i){c(r,t,i),u(t,l),Q(a,l,null),u(l,m),Q(d,l,null),u(t,v),u(t,_),w=!0},p(r,[i]){const y={};i&1&&(y.$$scope={dirty:i,ctx:r}),a.$set(y);const h={};i&1&&(h.$$scope={dirty:i,ctx:r}),d.$set(h)},i(r){w||(K(a.$$.fragment,r),K(d.$$.fragment,r),w=!0)},o(r){J(a.$$.fragment,r),J(d.$$.fragment,r),w=!1},d(r){r&&s(t),W(a),W(d)}}}class wt extends Fe{constructor(t){super(),ze(this,t,null,kt,qe,{})}}function It(g){let t,l,a,m,d,v="Default (20px)",_,x,w,r,i="1×DPR (60px)",y,h,I,M,ne="2×DPR (120px)",G,R,z,he,F,A='Comparing the canvas quality at different render scales <span class="dimmed">(<em>magnified to emphasize crust</em>)</span>.',X;const Y=[{size:20},{percent:g[0]},g[2]];let Z={};for(let o=0;o<Y.length;o+=1)Z=$e(Z,Y[o]);m=new We({props:Z});const N=[{size:60},{percent:g[0]},g[2]];let ee={};for(let o=0;o<N.length;o+=1)ee=$e(ee,N[o]);w=new We({props:ee});const S=[{size:120},{percent:g[0]},g[2]];let ge={};for(let o=0;o<S.length;o+=1)ge=$e(ge,S[o]);I=new We({props:ge});const te=[g[1]];function B(o){g[3](o)}let re={};for(let o=0;o<te.length;o+=1)re=$e(re,te[o]);return g[0]!==void 0&&(re.value=g[0]),R=new xt({props:re}),ht.push(()=>$t(R,"value",B)),{c(){t=p("figure"),l=p("div"),a=p("figure"),U(m.$$.fragment),d=p("figcaption"),d.textContent=v,_=C(),x=p("figure"),U(w.$$.fragment),r=p("figcaption"),r.textContent=i,y=C(),h=p("figure"),U(I.$$.fragment),M=p("figcaption"),M.textContent=ne,G=C(),U(R.$$.fragment),he=C(),F=p("figcaption"),F.innerHTML=A,this.h()},l(o){t=f(o,"FIGURE",{class:!0,role:!0});var b=E(t);l=f(b,"DIV",{class:!0});var q=E(l);a=f(q,"FIGURE",{class:!0});var D=E(a);V(m.$$.fragment,D),d=f(D,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),T(d)!=="svelte-z9i5lc"&&(d.textContent=v),D.forEach(s),_=k(q),x=f(q,"FIGURE",{class:!0});var se=E(x);V(w.$$.fragment,se),r=f(se,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),T(r)!=="svelte-frrpe1"&&(r.textContent=i),se.forEach(s),y=k(q),h=f(q,"FIGURE",{class:!0});var j=E(h);V(I.$$.fragment,j),M=f(j,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),T(M)!=="svelte-nddsfz"&&(M.textContent=ne),j.forEach(s),q.forEach(s),G=k(b),V(R.$$.fragment,b),he=k(b),F=f(b,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),T(F)!=="svelte-1i7h7ud"&&(F.innerHTML=A),b.forEach(s),this.h()},h(){$(d,"class","svelte-1eoy1h6"),$(a,"class","svelte-1eoy1h6"),$(r,"class","svelte-1eoy1h6"),$(x,"class","svelte-1eoy1h6"),$(M,"class","svelte-1eoy1h6"),$(h,"class","svelte-1eoy1h6"),$(l,"class","radius-group figblock box-shadow svelte-1eoy1h6"),$(F,"class","caption svelte-1eoy1h6"),$(t,"class","max-w svelte-1eoy1h6"),$(t,"role","group")},m(o,b){c(o,t,b),u(t,l),u(l,a),Q(m,a,null),u(a,d),u(l,_),u(l,x),Q(w,x,null),u(x,r),u(l,y),u(l,h),Q(I,h,null),u(h,M),u(t,G),Q(R,t,null),u(t,he),u(t,F),X=!0},p(o,[b]){const q=b&5?xe(Y,[Y[0],b&1&&{percent:o[0]},b&4&&ye(o[2])]):{};m.$set(q);const D=b&5?xe(N,[N[0],b&1&&{percent:o[0]},b&4&&ye(o[2])]):{};w.$set(D);const se=b&5?xe(S,[S[0],b&1&&{percent:o[0]},b&4&&ye(o[2])]):{};I.$set(se);const j=b&2?xe(te,[ye(o[1])]):{};!z&&b&1&&(z=!0,j.value=o[0],gt(()=>z=!1)),R.$set(j)},i(o){X||(K(m.$$.fragment,o),K(w.$$.fragment,o),K(I.$$.fragment,o),K(R.$$.fragment,o),X=!0)},o(o){J(m.$$.fragment,o),J(w.$$.fragment,o),J(I.$$.fragment,o),J(R.$$.fragment,o),X=!1},d(o){o&&s(t),W(m),W(w),W(I),W(R)}}}function Tt(g,t,l){const a={thumbColor:"var(--slate-blue-dim)",showNumber:!0,numSize:"var(--step--1)",step:"1",numColor:"var(--tx--1)"};let m=75;const d={use_decimal:!1,use_DPR:!1,fillSpace:!0,seeking:!0,bgColor:"none",colorFill:"#686766",colorStroke:"#8e8d8a44"};function v(_){m=_,l(0,m)}return[m,a,d,v]}class Et extends Fe{constructor(t){super(),ze(this,t,Tt,It,qe,{})}}function dt(g,t,l){const a=g.slice();return a[5]=t[l],a}function Ht(g){let t,l="$:";return{c(){t=p("span"),t.textContent=l,this.h()},l(a){t=f(a,"SPAN",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-1r4ip9g"&&(t.textContent=l),this.h()},h(){$(t,"class","sym svelte-1atgq7")},m(a,m){c(a,t,m)},d(a){a&&s(t)}}}function mt(g){let t,l=g[5].value+"",a,m;return{c(){t=p("span"),a=H(l),this.h()},l(d){t=f(d,"SPAN",{class:!0});var v=E(t);a=P(v,l),v.forEach(s),this.h()},h(){$(t,"class",m=pt(g[5].type)+" svelte-1atgq7")},m(d,v){c(d,t,v),u(t,a)},p(d,v){v&1&&l!==(l=d[5].value+"")&&bt(a,l),v&1&&m!==(m=pt(d[5].type)+" svelte-1atgq7")&&$(t,"class",m)},d(d){d&&s(t)}}}function Pt(g){let t,l,a='<svg viewBox="-5 0 50 20" width="55px" height="24px" aria-hidden="true" class="svelte-1atgq7"><circle r="5" cx="5" cy="10" fill="var(--slate-blue-dim)"></circle><circle r="5" cx="20" cy="10" fill="var(--slate-blue)"></circle><circle r="5" cx="35" cy="10" fill="var(--slate)"></circle></svg>',m,d,v,_,x=Ht(),w=ut(g[1](g[0])),r=[];for(let i=0;i<w.length;i+=1)r[i]=mt(dt(g,w,i));return{c(){t=p("div"),l=p("div"),l.innerHTML=a,m=C(),d=p("pre"),v=p("code"),x&&x.c(),_=ot();for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){t=f(i,"DIV",{class:!0});var y=E(t);l=f(y,"DIV",{class:!0,"data-svelte-h":!0}),T(l)!=="svelte-1dq62u1"&&(l.innerHTML=a),m=k(y),d=f(y,"PRE",{tabindex:!0,class:!0});var h=E(d);v=f(h,"CODE",{class:!0});var I=E(v);x&&x.l(I),_=ot();for(let M=0;M<r.length;M+=1)r[M].l(I);I.forEach(s),h.forEach(s),y.forEach(s),this.h()},h(){$(l,"class","title combo top svelte-1atgq7"),$(v,"class","svelte-1atgq7"),$(d,"tabindex","0"),$(d,"class","combo bottom codeblock overflow-scrollbar svelte-1atgq7"),$(t,"class","max-w pseudo-border radius svelte-1atgq7")},m(i,y){c(i,t,y),u(t,l),u(t,m),u(t,d),u(d,v),x&&x.m(v,null),u(v,_);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(v,null)},p(i,[y]){if(y&3){w=ut(i[1](i[0]));let h;for(h=0;h<w.length;h+=1){const I=dt(i,w,h);r[h]?r[h].p(I,y):(r[h]=mt(I),r[h].c(),r[h].m(v,null))}for(;h<r.length;h+=1)r[h].d(1);r.length=w.length}},i:ct,o:ct,d(i){i&&s(t),x&&x.d(),vt(r,i)}}}const Mt=/\S+\s*/g;function Gt(g,t,l){let{content:a=""}=t,m=[];const d=_=>{const x=_.match(Mt);if(x)return x},v=_=>{let x=_.slice(0),w=x.shift(),r=[];return r.push({value:w,type:"program"}),x.forEach(i=>{let y={value:i,type:"space"};switch(!0){case i[0]=="-":y.type="option";break;case i[0]=="[":y.type="file";break;case(i[0]>="0"&&i[0]<="9"):y.type="number";break;default:y.type="default";break}r.push(y)}),r};return _t(()=>{l(2,a=a.trim()),l(0,m=d(a))}),g.$$set=_=>{"content"in _&&l(2,a=_.content)},[m,v,a]}class Lt extends Fe{constructor(t){super(),ze(this,t,Gt,Pt,qe,{content:2})}}function Rt(g){let t,l="<span>Gif Scrubber</span>",a,m,d=`An inline video player that acts as a drop-in alternative to <code data-type="ext">GIFs</code>. It’s a pretty common
	pattern for ‘modernizing’ the old format, but I put a good chunk of time into getting it working how I wanted and
	added a couple progressive enhancements.`,v,_,x,w,r,i,y="Controls",h,I,M=`To keep everything minimal and mobile-friendly, I decided to make custom controls. A fixed button toggles play state\r
	and, when the container is grabbed, pointer events kick in to manage the timeline.`,ne,G,R,z,he="s.t.",F,A,X,Y,Z,N,ee,S,ge="Progress indicator",te,B,re=`The graphic is <s>shamelessly ripped from</s> <em class="txt-glow">inspired by</em> the countdown timer from
	iOS—it&#39;s compact and conveys pretty much exactly what it&#39;s doing (loop + time). I originally used an
	<code data-type="html">svg</code>
	but, following <em>several</em> failed remakes, I wasn&#39;t able to figure out the cause of janky transforms.`,o,b,q,D,se="canvas",j,ie,Ae,je,Ce,oe,ke,ce,Ye=`I ended up doubling the dimensions (<em>i.e.</em> the rightmost canvas) to make it
	<em>super</em> crisp—<em>super</em> unnecessary! It <em>was</em> slightly sharper and there <em>wasn&#39;t</em> any noticeable
	impact on performance (only a single canvas is active/time), so I went with it.`,we,Ie,Te,pe,Ze="Media Support",Ee,fe,et=`The quality/compression benefits video brings are really nice, but using them to replace <em>_real_</em> gifs comes with
	couple of tradeoffs:`,He,le,tt="<li>can&#39;t <em>hold-to-save</em> on mobile</li> <li>they aren&#39;t visible in reader mode</li> <li>playback support depends on browser + hardware features</li>",Pe,ue,st=`To make a long story short, I address the last point by running a pre-build Python script to crawl my directory and
	generate <code data-type="ext">.webm</code> fallbacks where none exist. The <em class="txt-glow">magic</em> <code data-type="ext">ffmpeg</code> command I use to make a (hopefully) more compatible version looks like this:`,Me,ae,Ge,Le,Re,L,Oe,ve,lt="e.g.",Ne,de,Be,Ue,me,at=".h265",Ve,_e,nt="etc.",Qe,De;_=new wt({}),oe=new Et({});const Ke=[g[0]];let Je={};for(let e=0;e<Ke.length;e+=1)Je=$e(Je,Ke[e]);return ae=new Lt({props:Je}),{c(){t=p("h1"),t.innerHTML=l,a=C(),m=p("p"),m.innerHTML=d,v=C(),U(_.$$.fragment),x=C(),w=p("hr"),r=C(),i=p("h3"),i.textContent=y,h=C(),I=p("p"),I.textContent=M,ne=C(),G=p("p"),R=H("It's set up "),z=p("em"),z.textContent=he,F=H(` moving a distance across the figure’s width is proportional to seeking that fraction of its\r
	video's duration. So to Red Blob Games for their in-depth article about\r
	`),A=p("a"),X=H("draggable objects"),Y=H(" and events—extremely helpful!"),Z=C(),N=p("hr"),ee=C(),S=p("h3"),S.textContent=ge,te=C(),B=p("p"),B.innerHTML=re,o=C(),b=p("p"),q=H("Switching over to a "),D=p("code"),D.textContent=se,j=H(` fixed that issue, but introduced another that gave it a\r
	blocky, aliased look on my phone. Thankfully, I learned browsers provide a fix for high dpi screens courtesy the\r
	`),ie=p("a"),Ae=H("device pixel ratio (DPR)"),je=H(", which can be queried and used as a resolution multiplier:"),Ce=C(),U(oe.$$.fragment),ke=C(),ce=p("p"),ce.innerHTML=Ye,we=C(),Ie=p("hr"),Te=C(),pe=p("h3"),pe.textContent=Ze,Ee=C(),fe=p("p"),fe.innerHTML=et,He=C(),le=p("ol"),le.innerHTML=tt,Pe=C(),ue=p("p"),ue.innerHTML=st,Me=C(),U(ae.$$.fragment),Ge=C(),Le=p("hr"),Re=C(),L=p("p"),Oe=H("Getting to a point where the behavior felt predictable took a lot more effort than I expected ("),ve=p("em"),ve.textContent=lt,Ne=C(),de=p("a"),Be=H("safari media fragment hack"),Ue=H(", no "),me=p("code"),me.textContent=at,Ve=H(` in\r
	FireFox, `),_e=p("em"),_e.textContent=nt,Qe=H("), but I'm pretty happy with how it turned out :)"),this.h()},l(e){t=f(e,"H1",{"data-svelte-h":!0}),T(t)!=="svelte-16mbdpp"&&(t.innerHTML=l),a=k(e),m=f(e,"P",{"data-svelte-h":!0}),T(m)!=="svelte-ln5zvg"&&(m.innerHTML=d),v=k(e),V(_.$$.fragment,e),x=k(e),w=f(e,"HR",{}),r=k(e),i=f(e,"H3",{"data-svelte-h":!0}),T(i)!=="svelte-pu7e26"&&(i.textContent=y),h=k(e),I=f(e,"P",{"data-svelte-h":!0}),T(I)!=="svelte-q6b5yg"&&(I.textContent=M),ne=k(e),G=f(e,"P",{});var n=E(G);R=P(n,"It's set up "),z=f(n,"EM",{"data-svelte-h":!0}),T(z)!=="svelte-hspnzd"&&(z.textContent=he),F=P(n,` moving a distance across the figure’s width is proportional to seeking that fraction of its\r
	video's duration. So to Red Blob Games for their in-depth article about\r
	`),A=f(n,"A",{href:!0,target:!0});var Se=E(A);X=P(Se,"draggable objects"),Se.forEach(s),Y=P(n," and events—extremely helpful!"),n.forEach(s),Z=k(e),N=f(e,"HR",{}),ee=k(e),S=f(e,"H3",{"data-svelte-h":!0}),T(S)!=="svelte-lxue3i"&&(S.textContent=ge),te=k(e),B=f(e,"P",{"data-svelte-h":!0}),T(B)!=="svelte-n8fp47"&&(B.innerHTML=re),o=k(e),b=f(e,"P",{});var be=E(b);q=P(be,"Switching over to a "),D=f(be,"CODE",{"data-type":!0,"data-svelte-h":!0}),T(D)!=="svelte-jhma2z"&&(D.textContent=se),j=P(be,` fixed that issue, but introduced another that gave it a\r
	blocky, aliased look on my phone. Thankfully, I learned browsers provide a fix for high dpi screens courtesy the\r
	`),ie=f(be,"A",{href:!0,target:!0});var rt=E(ie);Ae=P(rt,"device pixel ratio (DPR)"),rt.forEach(s),je=P(be,", which can be queried and used as a resolution multiplier:"),be.forEach(s),Ce=k(e),V(oe.$$.fragment,e),ke=k(e),ce=f(e,"P",{"data-svelte-h":!0}),T(ce)!=="svelte-10d4d2w"&&(ce.innerHTML=Ye),we=k(e),Ie=f(e,"HR",{}),Te=k(e),pe=f(e,"H3",{"data-svelte-h":!0}),T(pe)!=="svelte-ejqcuf"&&(pe.textContent=Ze),Ee=k(e),fe=f(e,"P",{"data-svelte-h":!0}),T(fe)!=="svelte-bn07u1"&&(fe.innerHTML=et),He=k(e),le=f(e,"OL",{role:!0,"data-svelte-h":!0}),T(le)!=="svelte-31bwzl"&&(le.innerHTML=tt),Pe=k(e),ue=f(e,"P",{"data-svelte-h":!0}),T(ue)!=="svelte-1vtztio"&&(ue.innerHTML=st),Me=k(e),V(ae.$$.fragment,e),Ge=k(e),Le=f(e,"HR",{}),Re=k(e),L=f(e,"P",{});var O=E(L);Oe=P(O,"Getting to a point where the behavior felt predictable took a lot more effort than I expected ("),ve=f(O,"EM",{"data-svelte-h":!0}),T(ve)!=="svelte-2dbwd4"&&(ve.textContent=lt),Ne=k(O),de=f(O,"A",{href:!0,target:!0});var it=E(de);Be=P(it,"safari media fragment hack"),it.forEach(s),Ue=P(O,", no "),me=f(O,"CODE",{"data-type":!0,"data-svelte-h":!0}),T(me)!=="svelte-1lul1jc"&&(me.textContent=at),Ve=P(O,` in\r
	FireFox, `),_e=f(O,"EM",{"data-svelte-h":!0}),T(_e)!=="svelte-ynskcq"&&(_e.textContent=nt),Qe=P(O,"), but I'm pretty happy with how it turned out :)"),O.forEach(s),this.h()},h(){$(A,"href",Dt),$(A,"target",Xe),$(D,"data-type","html"),$(ie,"href",St),$(ie,"target",Xe),$(le,"role","list"),$(de,"href",qt),$(de,"target",Xe),$(me,"data-type","ext")},m(e,n){c(e,t,n),c(e,a,n),c(e,m,n),c(e,v,n),Q(_,e,n),c(e,x,n),c(e,w,n),c(e,r,n),c(e,i,n),c(e,h,n),c(e,I,n),c(e,ne,n),c(e,G,n),u(G,R),u(G,z),u(G,F),u(G,A),u(A,X),u(G,Y),c(e,Z,n),c(e,N,n),c(e,ee,n),c(e,S,n),c(e,te,n),c(e,B,n),c(e,o,n),c(e,b,n),u(b,q),u(b,D),u(b,j),u(b,ie),u(ie,Ae),u(b,je),c(e,Ce,n),Q(oe,e,n),c(e,ke,n),c(e,ce,n),c(e,we,n),c(e,Ie,n),c(e,Te,n),c(e,pe,n),c(e,Ee,n),c(e,fe,n),c(e,He,n),c(e,le,n),c(e,Pe,n),c(e,ue,n),c(e,Me,n),Q(ae,e,n),c(e,Ge,n),c(e,Le,n),c(e,Re,n),c(e,L,n),u(L,Oe),u(L,ve),u(L,Ne),u(L,de),u(de,Be),u(L,Ue),u(L,me),u(L,Ve),u(L,_e),u(L,Qe),De=!0},p(e,[n]){const Se=n&1?xe(Ke,[ye(e[0])]):{};ae.$set(Se)},i(e){De||(K(_.$$.fragment,e),K(oe.$$.fragment,e),K(ae.$$.fragment,e),De=!0)},o(e){J(_.$$.fragment,e),J(oe.$$.fragment,e),J(ae.$$.fragment,e),De=!1},d(e){e&&(s(t),s(a),s(m),s(v),s(x),s(w),s(r),s(i),s(h),s(I),s(ne),s(G),s(Z),s(N),s(ee),s(S),s(te),s(B),s(o),s(b),s(Ce),s(ke),s(ce),s(we),s(Ie),s(Te),s(pe),s(Ee),s(fe),s(He),s(le),s(Pe),s(ue),s(Me),s(Ge),s(Le),s(Re),s(L)),W(_,e),W(oe,e),W(ae,e)}}}const Xe="_blank",Dt="https://www.redblobgames.com/making-of/draggable/",St="https://cloudinary.com/glossary/device-pixel-ratio",qt="https://muffinman.io/blog/hack-for-ios-safari-to-display-html-video-thumbnail/";function Ft(g){return[{content:"ffmpeg -i [input.mp4] -pix_fmt yuv420p -c:v libvpx-vp9 -threads 8 -crf 40 -g 32 -deadline good -an [output.webm]"}]}class Ut extends Fe{constructor(t){super(),ze(this,t,Ft,Rt,qe,{})}}export{Ut as component};
