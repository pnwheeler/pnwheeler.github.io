import{s as Qe,f as i,a as c,g as o,h as j,c as m,d as t,G as v,j as _,i as r,u as l,l as w,m as k,K as Me,p as ot,S as pt,v as ft}from"../chunks/scheduler.8d84c197.js";import{S as Ke,i as Ve,b as te,d as ae,m as ne,a as se,t as re,e as le,j as ut}from"../chunks/index.5e028736.js";import{G as it,R as Ue}from"../chunks/Gif.63ac9d6d.js";import{g as Le,a as je}from"../chunks/spread.8a54911c.js";import{R as ct}from"../chunks/RangeSlider.6c9848d9.js";function mt($){let n;return{c(){n=w("Blender donut")},l(p){n=k(p,"Blender donut")},m(p,f){r(p,n,f)},d(p){p&&t(n)}}}function dt($){let n;return{c(){n=w("Quick ttk on boss")},l(p){n=k(p,"Quick ttk on boss")},m(p,f){r(p,n,f)},d(p){p&&t(n)}}}function ht($){let n,p,f,d,x,R,b,I=`Demo gifs: Tutorial Donut and gamer clip from my best 
		run of <a href="https://store.steampowered.com/app/1676130/Deadlink/" target="_blank">deadlink</a>.`,C;return f=new it({props:{src:"/media/projects/GifScrubber/blender_donut.mp4",height:"min(240px, 24vh)",radius_type:"combo left",$$slots:{caption:[mt]},$$scope:{ctx:$}}}),x=new it({props:{src:"/media/projects/GifScrubber/deadlink.mp4",height:"min(240px, 24vh)",t:"#t=1",autoplay:!1,controlsBg:"#0006",radius_type:"combo right",$$slots:{caption:[dt]},$$scope:{ctx:$}}}),{c(){n=i("figure"),p=i("div"),te(f.$$.fragment),d=c(),te(x.$$.fragment),R=c(),b=i("figcaption"),b.innerHTML=I,this.h()},l(u){n=o(u,"FIGURE",{class:!0,role:!0});var g=j(n);p=o(g,"DIV",{class:!0});var E=j(p);ae(f.$$.fragment,E),d=m(E),ae(x.$$.fragment,E),E.forEach(t),R=m(g),b=o(g,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),v(b)!=="svelte-1s14123"&&(b.innerHTML=I),g.forEach(t),this.h()},h(){_(p,"class","svelte-o0m8eb"),_(b,"class","caption"),_(n,"class","max-w svelte-o0m8eb"),_(n,"role","group")},m(u,g){r(u,n,g),l(n,p),ne(f,p,null),l(p,d),ne(x,p,null),l(n,R),l(n,b),C=!0},p(u,[g]){const E={};g&1&&(E.$$scope={dirty:g,ctx:u}),f.$set(E);const T={};g&1&&(T.$$scope={dirty:g,ctx:u}),x.$set(T)},i(u){C||(se(f.$$.fragment,u),se(x.$$.fragment,u),C=!0)},o(u){re(f.$$.fragment,u),re(x.$$.fragment,u),C=!1},d(u){u&&t(n),le(f),le(x)}}}class gt extends Ke{constructor(n){super(),Ve(this,n,null,ht,Qe,{})}}new TextEncoder;function vt($){let n,p,f,d,x,R="default (20px)",b,I,C,u,g="1×DPR (60px)",E,T,y,N,ie="2×DPR (120px)",H,M,S,ge,O,z="Comparing canvas detail at different render scales(zoomed simulating DPR=3).",B;const Q=[{size:20},{percent:$[0]},$[2]];let K={};for(let a=0;a<Q.length;a+=1)K=Me(K,Q[a]);d=new Ue({props:K});const U=[{size:60},{percent:$[0]},$[2]];let V={};for(let a=0;a<U.length;a+=1)V=Me(V,U[a]);C=new Ue({props:V});const F=[{size:120},{percent:$[0]},$[2]];let ve={};for(let a=0;a<F.length;a+=1)ve=Me(ve,F[a]);y=new Ue({props:ve});const W=[$[1]];function P(a){$[3](a)}let J={};for(let a=0;a<W.length;a+=1)J=Me(J,W[a]);return $[0]!==void 0&&(J.value=$[0]),M=new ct({props:J}),ot.push(()=>ut(M,"value",P)),{c(){n=i("figure"),p=i("figure"),f=i("figure"),te(d.$$.fragment),x=i("figcaption"),x.textContent=R,b=c(),I=i("figure"),te(C.$$.fragment),u=i("figcaption"),u.textContent=g,E=c(),T=i("figure"),te(y.$$.fragment),N=i("figcaption"),N.textContent=ie,H=c(),te(M.$$.fragment),ge=c(),O=i("figcaption"),O.textContent=z,this.h()},l(a){n=o(a,"FIGURE",{class:!0});var h=j(n);p=o(h,"FIGURE",{class:!0,role:!0});var D=j(p);f=o(D,"FIGURE",{class:!0});var L=j(f);ae(d.$$.fragment,L),x=o(L,"FIGCAPTION",{"data-svelte-h":!0}),v(x)!=="svelte-oosb3k"&&(x.textContent=R),L.forEach(t),b=m(D),I=o(D,"FIGURE",{class:!0});var X=j(I);ae(C.$$.fragment,X),u=o(X,"FIGCAPTION",{"data-svelte-h":!0}),v(u)!=="svelte-frrpe1"&&(u.textContent=g),X.forEach(t),E=m(D),T=o(D,"FIGURE",{class:!0});var A=j(T);ae(y.$$.fragment,A),N=o(A,"FIGCAPTION",{"data-svelte-h":!0}),v(N)!=="svelte-nddsfz"&&(N.textContent=ie),A.forEach(t),D.forEach(t),H=m(h),ae(M.$$.fragment,h),ge=m(h),O=o(h,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),v(O)!=="svelte-2bzy2y"&&(O.textContent=z),h.forEach(t),this.h()},h(){_(f,"class","svelte-1a2ejtc"),_(I,"class","svelte-1a2ejtc"),_(T,"class","svelte-1a2ejtc"),_(p,"class","radius figblock svelte-1a2ejtc"),_(p,"role","group"),_(O,"class","caption"),_(n,"class","max-w svelte-1a2ejtc")},m(a,h){r(a,n,h),l(n,p),l(p,f),ne(d,f,null),l(f,x),l(p,b),l(p,I),ne(C,I,null),l(I,u),l(p,E),l(p,T),ne(y,T,null),l(T,N),l(n,H),ne(M,n,null),l(n,ge),l(n,O),B=!0},p(a,[h]){const D=h&5?Le(Q,[Q[0],h&1&&{percent:a[0]},h&4&&je(a[2])]):{};d.$set(D);const L=h&5?Le(U,[U[0],h&1&&{percent:a[0]},h&4&&je(a[2])]):{};C.$set(L);const X=h&5?Le(F,[F[0],h&1&&{percent:a[0]},h&4&&je(a[2])]):{};y.$set(X);const A=h&2?Le(W,[je(a[1])]):{};!S&&h&1&&(S=!0,A.value=a[0],pt(()=>S=!1)),M.$set(A)},i(a){B||(se(d.$$.fragment,a),se(C.$$.fragment,a),se(y.$$.fragment,a),se(M.$$.fragment,a),B=!0)},o(a){re(d.$$.fragment,a),re(C.$$.fragment,a),re(y.$$.fragment,a),re(M.$$.fragment,a),B=!1},d(a){a&&t(n),le(d),le(C),le(y),le(M)}}}function _t($,n,p){const f={thumbColor:"var(--slate-blue-dim)",showNumber:!0,numSize:"var(--step--1)",step:"1",numColor:"var(--color-caption)"};let d=25;const x={use_decimal:!1,use_DPR:!1,fillSpace:!0,seeking:!0,bgColor:"none",colorFill:"#686766",colorStroke:"#8e8d8a44"};function R(b){d=b,p(0,d)}return[d,f,x,R]}class bt extends Ke{constructor(n){super(),Ve(this,n,_t,vt,Qe,{})}}function $t($){let n,p="<span>Gif Scrubber</span>",f,d,x=`An inline video player I made to act as a drop-in alternative to <code data-type="ext">.gif</code>. Along with helping
	me avoid conversion-related headaches when adding assets to my website, the component includes a couple of QOL
	improvements that make media handling more flexible.`,R,b,I,C,u,g,E="Scrubbing",T,y,N=`To keep everything mobile friendly and consistent across browsers, I decided to implement custom controls: an\r
	always-visible button on the corner toggles play state and, when the container is grabbed, pointer events kick in to\r
	manage the timeline.`,ie,H,M,S,ge="s.t.",O,z,B,Q,K,U,V,F,ve="Progress indicator",W,P,J,a,h="canvas",D,L,X="svg",A,oe,Fe,De,$e,pe,xe,fe,We=`I ended up scaling the dimensions up by an extra factor of two (<em>i.e.</em> the rightmost canvas) to make it
	<em>super</em> crisp—<em>super</em> unnecessary! It <em>was</em> slightly sharper and there <em>wasn&#39;t</em> any noticeable
	impact on performance (only a single canvas is active/time), so I went with it.`,Ce,ye,we,ue,Je="Other Considerations",ke,ce,Xe=`While the quality/compression benefits it brings are great,
	using the video element to replace the <em>_actual_</em> format has a couple of tradeoffs:`,Ie,Y,Ye="<li>can&#39;t <em>hold-to-save</em> on mobile</li> <li>they aren&#39;t visible in reader mode</li> <li>compatibility isn&#39;t guaranteed—playback support depends on browser features and hardware capabilities</li>",Te,me,Ze=`To make a long story short, I address the last point by running a pre-build Python script to crawl my directory and
	generate <code data-type="ext">.webm</code> fallbacks where none exist. The magic <code data-type="ext">ffmpeg</code> command
	I use looks like this:`,Ee,Z,et=`<code class="svelte-1fdslyx"><span>ffmpeg</span> -i [input].mp4 -movflags +faststart -pix_fmt yuv420p -c:v libvpx-vp9 -threads 8 -crf 40 -g 32 -deadline good -an [output].webm</code>
`,He,Pe,Ge,G,Oe,_e,tt="e.g.",Se,de,ze,Ae,he,at=".h265",qe,be,nt="etc.",Ne,Re;return b=new gt({}),pe=new bt({}),{c(){n=i("h1"),n.innerHTML=p,f=c(),d=i("p"),d.innerHTML=x,R=c(),te(b.$$.fragment),I=c(),C=i("hr"),u=c(),g=i("h3"),g.textContent=E,T=c(),y=i("p"),y.textContent=N,ie=c(),H=i("p"),M=w("It's set up "),S=i("em"),S.textContent=ge,O=w(` moving a distance across the figure’s width is proportional to seeking that fraction of its\r
	video's duration. Huge s/o to Red Blob Games for their in-depth article about\r
	`),z=i("a"),B=w("draggable objects"),Q=w("—extremely helpful!"),K=c(),U=i("hr"),V=c(),F=i("h3"),F.textContent=ve,W=c(),P=i("p"),J=w("Porting the original version of this graphic to "),a=i("code"),a.textContent=h,D=w(` solved an issue I had with janky\r
	`),L=i("code"),L.textContent=X,A=w(` transforms, but introduced another that gave it a low-quality, blocky look on my\r
	phone. Thankfully, browsers provide a fix for high dpi screens courtesy the\r
	`),oe=i("a"),Fe=w("device pixel ratio (DPR)"),De=w(", which I query and use as a resolution multiplier."),$e=c(),te(pe.$$.fragment),xe=c(),fe=i("p"),fe.innerHTML=We,Ce=c(),ye=i("hr"),we=c(),ue=i("h3"),ue.textContent=Je,ke=c(),ce=i("p"),ce.innerHTML=Xe,Ie=c(),Y=i("ol"),Y.innerHTML=Ye,Te=c(),me=i("p"),me.innerHTML=Ze,Ee=c(),Z=i("pre"),Z.innerHTML=et,He=c(),Pe=i("hr"),Ge=c(),G=i("p"),Oe=w("Getting to a point where the behavior felt predictable took a lot more effort than I expected ("),_e=i("em"),_e.textContent=tt,Se=c(),de=i("a"),ze=w("safari media fragment hack"),Ae=w(", no "),he=i("code"),he.textContent=at,qe=w(` in\r
	FireFox, `),be=i("em"),be.textContent=nt,Ne=w("), but I’m happy with how it turned out!"),this.h()},l(e){n=o(e,"H1",{"data-svelte-h":!0}),v(n)!=="svelte-16mbdpp"&&(n.innerHTML=p),f=m(e),d=o(e,"P",{"data-svelte-h":!0}),v(d)!=="svelte-9ycdng"&&(d.innerHTML=x),R=m(e),ae(b.$$.fragment,e),I=m(e),C=o(e,"HR",{}),u=m(e),g=o(e,"H3",{"data-svelte-h":!0}),v(g)!=="svelte-1c67i5l"&&(g.textContent=E),T=m(e),y=o(e,"P",{"data-svelte-h":!0}),v(y)!=="svelte-19t10t7"&&(y.textContent=N),ie=m(e),H=o(e,"P",{});var s=j(H);M=k(s,"It's set up "),S=o(s,"EM",{"data-svelte-h":!0}),v(S)!=="svelte-hspnzd"&&(S.textContent=ge),O=k(s,` moving a distance across the figure’s width is proportional to seeking that fraction of its\r
	video's duration. Huge s/o to Red Blob Games for their in-depth article about\r
	`),z=o(s,"A",{href:!0,target:!0});var st=j(z);B=k(st,"draggable objects"),st.forEach(t),Q=k(s,"—extremely helpful!"),s.forEach(t),K=m(e),U=o(e,"HR",{}),V=m(e),F=o(e,"H3",{"data-svelte-h":!0}),v(F)!=="svelte-lxue3i"&&(F.textContent=ve),W=m(e),P=o(e,"P",{});var ee=j(P);J=k(ee,"Porting the original version of this graphic to "),a=o(ee,"CODE",{"data-type":!0,"data-svelte-h":!0}),v(a)!=="svelte-jhma2z"&&(a.textContent=h),D=k(ee,` solved an issue I had with janky\r
	`),L=o(ee,"CODE",{"data-type":!0,"data-svelte-h":!0}),v(L)!=="svelte-mflvan"&&(L.textContent=X),A=k(ee,` transforms, but introduced another that gave it a low-quality, blocky look on my\r
	phone. Thankfully, browsers provide a fix for high dpi screens courtesy the\r
	`),oe=o(ee,"A",{href:!0,target:!0});var rt=j(oe);Fe=k(rt,"device pixel ratio (DPR)"),rt.forEach(t),De=k(ee,", which I query and use as a resolution multiplier."),ee.forEach(t),$e=m(e),ae(pe.$$.fragment,e),xe=m(e),fe=o(e,"P",{"data-svelte-h":!0}),v(fe)!=="svelte-1vxpaju"&&(fe.innerHTML=We),Ce=m(e),ye=o(e,"HR",{}),we=m(e),ue=o(e,"H3",{"data-svelte-h":!0}),v(ue)!=="svelte-1ibvyiz"&&(ue.textContent=Je),ke=m(e),ce=o(e,"P",{"data-svelte-h":!0}),v(ce)!=="svelte-13ydy91"&&(ce.innerHTML=Xe),Ie=m(e),Y=o(e,"OL",{role:!0,"data-svelte-h":!0}),v(Y)!=="svelte-1nvufvm"&&(Y.innerHTML=Ye),Te=m(e),me=o(e,"P",{"data-svelte-h":!0}),v(me)!=="svelte-1r2dh1s"&&(me.innerHTML=Ze),Ee=m(e),Z=o(e,"PRE",{class:!0,"data-svelte-h":!0}),v(Z)!=="svelte-1wwy5vq"&&(Z.innerHTML=et),He=m(e),Pe=o(e,"HR",{}),Ge=m(e),G=o(e,"P",{});var q=j(G);Oe=k(q,"Getting to a point where the behavior felt predictable took a lot more effort than I expected ("),_e=o(q,"EM",{"data-svelte-h":!0}),v(_e)!=="svelte-2dbwd4"&&(_e.textContent=tt),Se=m(q),de=o(q,"A",{href:!0,target:!0});var lt=j(de);ze=k(lt,"safari media fragment hack"),lt.forEach(t),Ae=k(q,", no "),he=o(q,"CODE",{"data-type":!0,"data-svelte-h":!0}),v(he)!=="svelte-1lul1jc"&&(he.textContent=at),qe=k(q,` in\r
	FireFox, `),be=o(q,"EM",{"data-svelte-h":!0}),v(be)!=="svelte-ynskcq"&&(be.textContent=nt),Ne=k(q,"), but I’m happy with how it turned out!"),q.forEach(t),this.h()},h(){_(z,"href",xt),_(z,"target",Be),_(a,"data-type","html"),_(L,"data-type","html"),_(oe,"href",Ct),_(oe,"target",Be),_(Y,"role","list"),_(Z,"class","codeblock overflow-scrollbar max-w svelte-1fdslyx"),_(de,"href",yt),_(de,"target",Be),_(he,"data-type","ext")},m(e,s){r(e,n,s),r(e,f,s),r(e,d,s),r(e,R,s),ne(b,e,s),r(e,I,s),r(e,C,s),r(e,u,s),r(e,g,s),r(e,T,s),r(e,y,s),r(e,ie,s),r(e,H,s),l(H,M),l(H,S),l(H,O),l(H,z),l(z,B),l(H,Q),r(e,K,s),r(e,U,s),r(e,V,s),r(e,F,s),r(e,W,s),r(e,P,s),l(P,J),l(P,a),l(P,D),l(P,L),l(P,A),l(P,oe),l(oe,Fe),l(P,De),r(e,$e,s),ne(pe,e,s),r(e,xe,s),r(e,fe,s),r(e,Ce,s),r(e,ye,s),r(e,we,s),r(e,ue,s),r(e,ke,s),r(e,ce,s),r(e,Ie,s),r(e,Y,s),r(e,Te,s),r(e,me,s),r(e,Ee,s),r(e,Z,s),r(e,He,s),r(e,Pe,s),r(e,Ge,s),r(e,G,s),l(G,Oe),l(G,_e),l(G,Se),l(G,de),l(de,ze),l(G,Ae),l(G,he),l(G,qe),l(G,be),l(G,Ne),Re=!0},p:ft,i(e){Re||(se(b.$$.fragment,e),se(pe.$$.fragment,e),Re=!0)},o(e){re(b.$$.fragment,e),re(pe.$$.fragment,e),Re=!1},d(e){e&&(t(n),t(f),t(d),t(R),t(I),t(C),t(u),t(g),t(T),t(y),t(ie),t(H),t(K),t(U),t(V),t(F),t(W),t(P),t($e),t(xe),t(fe),t(Ce),t(ye),t(we),t(ue),t(ke),t(ce),t(Ie),t(Y),t(Te),t(me),t(Ee),t(Z),t(He),t(Pe),t(Ge),t(G)),le(b,e),le(pe,e)}}}const Be="_blank",xt="https://www.redblobgames.com/making-of/draggable/",Ct="https://cloudinary.com/glossary/device-pixel-ratio",yt="https://muffinman.io/blog/hack-for-ios-safari-to-display-html-video-thumbnail/";class Ht extends Ke{constructor(n){super(),Ve(this,n,null,$t,Qe,{})}}export{Ht as component};
