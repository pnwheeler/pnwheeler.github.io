import{s as je,f as o,a as $,g as p,h as M,c as b,d as l,G as w,j as x,i as n,u as f,l as E,m as H,K as Le,p as it,T as ot,A as pt,B as ft,C as ct,D as ut}from"../chunks/scheduler.6d6d93c7.js";import{S as Fe,i as Se,b as Q,d as K,m as J,a as q,t as N,e as W,j as dt}from"../chunks/index.15fe4709.js";import{G as nt,R as Ke}from"../chunks/Gif.1eded9e3.js";import{g as Re,a as De}from"../chunks/spread.8a54911c.js";import{R as mt}from"../chunks/RangeSlider.931194e2.js";function ht(g){let t;return{c(){t=E("Blender donut")},l(s){t=H(s,"Blender donut")},m(s,c){n(s,t,c)},d(s){s&&l(t)}}}function vt(g){let t;return{c(){t=E("Quick ttk on boss")},l(s){t=H(s,"Quick ttk on boss")},m(s,c){n(s,t,c)},d(s){s&&l(t)}}}function gt(g){let t,s,c,m,h,C,_,y=`Demo gifs: Tutorial Donut and gamer clip from my best 
		run of <a href="https://store.steampowered.com/app/1676130/Deadlink/" target="_blank">deadlink</a>.`,u;return c=new nt({props:{src:"/media/projects/GifScrubber/blender_donut.mp4",height:"min(240px, 24vh)",radius_type:"combo left",$$slots:{caption:[ht]},$$scope:{ctx:g}}}),h=new nt({props:{src:"/media/projects/GifScrubber/deadlink.mp4",height:"min(240px, 24vh)",t:"#t=1",autoplay:!1,controlsBg:"#0006",radius_type:"combo right",$$slots:{caption:[vt]},$$scope:{ctx:g}}}),{c(){t=o("figure"),s=o("div"),Q(c.$$.fragment),m=$(),Q(h.$$.fragment),C=$(),_=o("figcaption"),_.innerHTML=y,this.h()},l(i){t=p(i,"FIGURE",{class:!0,role:!0});var d=M(t);s=p(d,"DIV",{class:!0});var I=M(s);K(c.$$.fragment,I),m=b(I),K(h.$$.fragment,I),I.forEach(l),C=b(d),_=p(d,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),w(_)!=="svelte-1s14123"&&(_.innerHTML=y),d.forEach(l),this.h()},h(){x(s,"class","radius-group svelte-6cxl5a"),x(_,"class","caption"),x(t,"class","max-w svelte-6cxl5a"),x(t,"role","group")},m(i,d){n(i,t,d),f(t,s),J(c,s,null),f(s,m),J(h,s,null),f(t,C),f(t,_),u=!0},p(i,[d]){const I={};d&1&&(I.$$scope={dirty:d,ctx:i}),c.$set(I);const k={};d&1&&(k.$$scope={dirty:d,ctx:i}),h.$set(k)},i(i){u||(q(c.$$.fragment,i),q(h.$$.fragment,i),u=!0)},o(i){N(c.$$.fragment,i),N(h.$$.fragment,i),u=!1},d(i){i&&l(t),W(c),W(h)}}}class _t extends Fe{constructor(t){super(),Se(this,t,null,gt,je,{})}}function $t(g){let t,s,c,m,h,C="Default (20px)",_,y,u,i,d="1×DPR (60px)",I,k,T,F,re="2×DPR (120px)",P,z,S,he,j,A='Comparing the canvas quality at different render scales <span class="dimmed">(<em>magnified to emphasize crust</em>)</span>.',X;const Y=[{size:20},{percent:g[0]},g[2]];let Z={};for(let r=0;r<Y.length;r+=1)Z=Le(Z,Y[r]);m=new Ke({props:Z});const U=[{size:60},{percent:g[0]},g[2]];let ee={};for(let r=0;r<U.length;r+=1)ee=Le(ee,U[r]);u=new Ke({props:ee});const R=[{size:120},{percent:g[0]},g[2]];let ve={};for(let r=0;r<R.length;r+=1)ve=Le(ve,R[r]);T=new Ke({props:ve});const te=[g[1]];function V(r){g[3](r)}let ne={};for(let r=0;r<te.length;r+=1)ne=Le(ne,te[r]);return g[0]!==void 0&&(ne.value=g[0]),z=new mt({props:ne}),it.push(()=>dt(z,"value",V)),{c(){t=o("figure"),s=o("div"),c=o("figure"),Q(m.$$.fragment),h=o("figcaption"),h.textContent=C,_=$(),y=o("figure"),Q(u.$$.fragment),i=o("figcaption"),i.textContent=d,I=$(),k=o("figure"),Q(T.$$.fragment),F=o("figcaption"),F.textContent=re,P=$(),Q(z.$$.fragment),he=$(),j=o("figcaption"),j.innerHTML=A,this.h()},l(r){t=p(r,"FIGURE",{class:!0,role:!0});var v=M(t);s=p(v,"DIV",{class:!0});var D=M(s);c=p(D,"FIGURE",{class:!0});var L=M(c);K(m.$$.fragment,L),h=p(L,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),w(h)!=="svelte-z9i5lc"&&(h.textContent=C),L.forEach(l),_=b(D),y=p(D,"FIGURE",{class:!0});var le=M(y);K(u.$$.fragment,le),i=p(le,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),w(i)!=="svelte-frrpe1"&&(i.textContent=d),le.forEach(l),I=b(D),k=p(D,"FIGURE",{class:!0});var O=M(k);K(T.$$.fragment,O),F=p(O,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),w(F)!=="svelte-nddsfz"&&(F.textContent=re),O.forEach(l),D.forEach(l),P=b(v),K(z.$$.fragment,v),he=b(v),j=p(v,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),w(j)!=="svelte-1i7h7ud"&&(j.innerHTML=A),v.forEach(l),this.h()},h(){x(h,"class","svelte-mwrzrl"),x(c,"class","svelte-mwrzrl"),x(i,"class","svelte-mwrzrl"),x(y,"class","svelte-mwrzrl"),x(F,"class","svelte-mwrzrl"),x(k,"class","svelte-mwrzrl"),x(s,"class","radius-group figblock box-shadow svelte-mwrzrl"),x(j,"class","caption svelte-mwrzrl"),x(t,"class","max-w svelte-mwrzrl"),x(t,"role","group")},m(r,v){n(r,t,v),f(t,s),f(s,c),J(m,c,null),f(c,h),f(s,_),f(s,y),J(u,y,null),f(y,i),f(s,I),f(s,k),J(T,k,null),f(k,F),f(t,P),J(z,t,null),f(t,he),f(t,j),X=!0},p(r,[v]){const D=v&5?Re(Y,[Y[0],v&1&&{percent:r[0]},v&4&&De(r[2])]):{};m.$set(D);const L=v&5?Re(U,[U[0],v&1&&{percent:r[0]},v&4&&De(r[2])]):{};u.$set(L);const le=v&5?Re(R,[R[0],v&1&&{percent:r[0]},v&4&&De(r[2])]):{};T.$set(le);const O=v&2?Re(te,[De(r[1])]):{};!S&&v&1&&(S=!0,O.value=r[0],ot(()=>S=!1)),z.$set(O)},i(r){X||(q(m.$$.fragment,r),q(u.$$.fragment,r),q(T.$$.fragment,r),q(z.$$.fragment,r),X=!0)},o(r){N(m.$$.fragment,r),N(u.$$.fragment,r),N(T.$$.fragment,r),N(z.$$.fragment,r),X=!1},d(r){r&&l(t),W(m),W(u),W(T),W(z)}}}function bt(g,t,s){const c={thumbColor:"var(--slate-blue-dim)",showNumber:!0,numSize:"var(--step--1)",step:"1",numColor:"var(--tx--1)"};let m=75;const h={use_decimal:!1,use_DPR:!1,fillSpace:!0,seeking:!0,bgColor:"none",colorFill:"#686766",colorStroke:"#8e8d8a44"};function C(_){m=_,s(0,m)}return[m,c,h,C]}class xt extends Fe{constructor(t){super(),Se(this,t,bt,$t,je,{})}}function wt(g){let t,s,c='<svg viewBox="-5 0 50 20" width="55px" height="20px" class="svelte-1vl1j4s"><circle r="5" cx="5" cy="10" fill="var(--slate-blue-dim)"></circle><circle r="5" cx="20" cy="10" fill="var(--slate-blue)"></circle><circle r="5" cx="35" cy="10" fill="var(--slate)"></circle></svg>',m,h,C,_;const y=g[1].default,u=pt(y,g,g[0],null);return{c(){t=o("div"),s=o("div"),s.innerHTML=c,m=$(),h=o("pre"),C=o("code"),u&&u.c(),this.h()},l(i){t=p(i,"DIV",{class:!0});var d=M(t);s=p(d,"DIV",{class:!0,"data-svelte-h":!0}),w(s)!=="svelte-9b8tcn"&&(s.innerHTML=c),m=b(d),h=p(d,"PRE",{class:!0});var I=M(h);C=p(I,"CODE",{class:!0});var k=M(C);u&&u.l(k),k.forEach(l),I.forEach(l),d.forEach(l),this.h()},h(){x(s,"class","title svelte-1vl1j4s"),x(C,"class","svelte-1vl1j4s"),x(h,"class","codeblock overflow-scrollbar svelte-1vl1j4s"),x(t,"class","max-w scroller pseudo-border svelte-1vl1j4s")},m(i,d){n(i,t,d),f(t,s),f(t,m),f(t,h),f(h,C),u&&u.m(C,null),_=!0},p(i,[d]){u&&u.p&&(!_||d&1)&&ft(u,y,i,i[0],_?ut(y,i[0],d,null):ct(i[0]),null)},i(i){_||(q(u,i),_=!0)},o(i){N(u,i),_=!1},d(i){i&&l(t),u&&u.d(i)}}}function Ct(g,t,s){let{$$slots:c={},$$scope:m}=t;return g.$$set=h=>{"$$scope"in h&&s(0,m=h.$$scope)},[m,c]}class yt extends Fe{constructor(t){super(),Se(this,t,Ct,wt,je,{})}}function kt(g){let t;return{c(){t=E("ffmpeg -i [input].mp4 -movflags +faststart -pix_fmt yuv420p -c:v libvpx-vp9 -threads 8 -crf 40 -g 32 -deadline good -an [output].webm")},l(s){t=H(s,"ffmpeg -i [input].mp4 -movflags +faststart -pix_fmt yuv420p -c:v libvpx-vp9 -threads 8 -crf 40 -g 32 -deadline good -an [output].webm")},m(s,c){n(s,t,c)},d(s){s&&l(t)}}}function It(g){let t,s="<span>Gif Scrubber</span>",c,m,h=`An inline video player that acts as a drop-in alternative to <code data-type="ext">GIFs</code>. It’s a pretty
	common pattern for ‘modernizing’ the old format, but I put a good chunk of time into getting it working how I wanted and added a couple progressive enhancements.`,C,_,y,u,i,d,I="Controls",k,T,F=`To keep everything minimal and mobile-friendly, I decided to make custom controls. A fixed button toggles play state and, when the container is grabbed, pointer\r
	events kick in to manage the timeline.`,re,P,z,S,he="s.t.",j,A,X,Y,Z,U,ee,R,ve="Progress indicator",te,V,ne=`The graphic is <s class="svelte-10y1g83">shamelessly ripped from</s> <em class="txt-glow">inspired by</em> the countdown timer from iOS—it&#39;s compact and
	conveys pretty much exactly what it&#39;s doing (loop + time). I originally used an <code data-type="html">svg</code> but, following <em>several</em> failed remakes, I wasn&#39;t able to figure out the cause of janky transforms.`,r,v,D,L,le="canvas",O,ie,Ae,Oe,xe,oe,we,pe,We=`I ended up doubling the dimensions (<em>i.e.</em> the rightmost canvas) to make it
	<em>super</em> crisp—<em>super</em> unnecessary! It <em>was</em> slightly sharper and there <em>wasn&#39;t</em> any noticeable
	impact on performance (only a single canvas is active/time), so I went with it.`,Ce,ye,ke,fe,Xe="Media Support",Ie,ce,Ye=`The quality/compression benefits are a no brainer, but using video to replace <em>_real_</em> gifs comes with couple
	of tradeoffs:`,Te,se,Ze="<li>can&#39;t <em>hold-to-save</em> on mobile</li> <li>they aren&#39;t visible in reader mode</li> <li>playback support depends on browser + hardware features</li>",Ee,ue,et=`To make a long story short, I address the last point by running a pre-build Python script to crawl my directory and
	generate <code data-type="ext">.webm</code> fallbacks where none exist. My magic <code data-type="ext">ffmpeg</code> command
	looks like this:`,He,ae,Me,Pe,Ge,G,Be,ge,tt="e.g.",qe,de,Ne,Ue,me,lt=".h265",Ve,_e,st="etc.",Qe,ze;return _=new _t({}),oe=new xt({}),ae=new yt({props:{$$slots:{default:[kt]},$$scope:{ctx:g}}}),{c(){t=o("h1"),t.innerHTML=s,c=$(),m=o("p"),m.innerHTML=h,C=$(),Q(_.$$.fragment),y=$(),u=o("hr"),i=$(),d=o("h3"),d.textContent=I,k=$(),T=o("p"),T.textContent=F,re=$(),P=o("p"),z=E("It's set up "),S=o("em"),S.textContent=he,j=E(` moving a distance across the figure’s width is proportional to seeking that fraction\r
	of its video's duration. So to Red Blob Games for their in-depth article about\r
	`),A=o("a"),X=E("draggable objects"),Y=E(" and events—extremely helpful!"),Z=$(),U=o("hr"),ee=$(),R=o("h3"),R.textContent=ve,te=$(),V=o("p"),V.innerHTML=ne,r=$(),v=o("p"),D=E("Switching over to a "),L=o("code"),L.textContent=le,O=E(` fixed that issue, but introduced another that gave it a\r
	blocky, aliased look on my phone. Thankfully, I learned browsers provide a fix for high dpi screens courtesy\r
	the `),ie=o("a"),Ae=E("device pixel ratio (DPR)"),Oe=E(", which can be queried and used as a resolution multiplier:"),xe=$(),Q(oe.$$.fragment),we=$(),pe=o("p"),pe.innerHTML=We,Ce=$(),ye=o("hr"),ke=$(),fe=o("h3"),fe.textContent=Xe,Ie=$(),ce=o("p"),ce.innerHTML=Ye,Te=$(),se=o("ol"),se.innerHTML=Ze,Ee=$(),ue=o("p"),ue.innerHTML=et,He=$(),Q(ae.$$.fragment),Me=$(),Pe=o("hr"),Ge=$(),G=o("p"),Be=E("Getting to a point where the behavior felt predictable took a lot more effort than I expected ("),ge=o("em"),ge.textContent=tt,qe=$(),de=o("a"),Ne=E("safari media fragment hack"),Ue=E(", no "),me=o("code"),me.textContent=lt,Ve=E(` in\r
	FireFox, `),_e=o("em"),_e.textContent=st,Qe=E("), but I'm pretty happy with how it turned out :)"),this.h()},l(e){t=p(e,"H1",{"data-svelte-h":!0}),w(t)!=="svelte-16mbdpp"&&(t.innerHTML=s),c=b(e),m=p(e,"P",{"data-svelte-h":!0}),w(m)!=="svelte-13nes2b"&&(m.innerHTML=h),C=b(e),K(_.$$.fragment,e),y=b(e),u=p(e,"HR",{}),i=b(e),d=p(e,"H3",{"data-svelte-h":!0}),w(d)!=="svelte-pu7e26"&&(d.textContent=I),k=b(e),T=p(e,"P",{"data-svelte-h":!0}),w(T)!=="svelte-1csm726"&&(T.textContent=F),re=b(e),P=p(e,"P",{});var a=M(P);z=H(a,"It's set up "),S=p(a,"EM",{"data-svelte-h":!0}),w(S)!=="svelte-hspnzd"&&(S.textContent=he),j=H(a,` moving a distance across the figure’s width is proportional to seeking that fraction\r
	of its video's duration. So to Red Blob Games for their in-depth article about\r
	`),A=p(a,"A",{href:!0,target:!0});var be=M(A);X=H(be,"draggable objects"),be.forEach(l),Y=H(a," and events—extremely helpful!"),a.forEach(l),Z=b(e),U=p(e,"HR",{}),ee=b(e),R=p(e,"H3",{"data-svelte-h":!0}),w(R)!=="svelte-lxue3i"&&(R.textContent=ve),te=b(e),V=p(e,"P",{"data-svelte-h":!0}),w(V)!=="svelte-g9lbk3"&&(V.innerHTML=ne),r=b(e),v=p(e,"P",{});var $e=M(v);D=H($e,"Switching over to a "),L=p($e,"CODE",{"data-type":!0,"data-svelte-h":!0}),w(L)!=="svelte-jhma2z"&&(L.textContent=le),O=H($e,` fixed that issue, but introduced another that gave it a\r
	blocky, aliased look on my phone. Thankfully, I learned browsers provide a fix for high dpi screens courtesy\r
	the `),ie=p($e,"A",{href:!0,target:!0});var at=M(ie);Ae=H(at,"device pixel ratio (DPR)"),at.forEach(l),Oe=H($e,", which can be queried and used as a resolution multiplier:"),$e.forEach(l),xe=b(e),K(oe.$$.fragment,e),we=b(e),pe=p(e,"P",{"data-svelte-h":!0}),w(pe)!=="svelte-10d4d2w"&&(pe.innerHTML=We),Ce=b(e),ye=p(e,"HR",{}),ke=b(e),fe=p(e,"H3",{"data-svelte-h":!0}),w(fe)!=="svelte-ejqcuf"&&(fe.textContent=Xe),Ie=b(e),ce=p(e,"P",{"data-svelte-h":!0}),w(ce)!=="svelte-1tltzol"&&(ce.innerHTML=Ye),Te=b(e),se=p(e,"OL",{role:!0,"data-svelte-h":!0}),w(se)!=="svelte-31bwzl"&&(se.innerHTML=Ze),Ee=b(e),ue=p(e,"P",{"data-svelte-h":!0}),w(ue)!=="svelte-c8brul"&&(ue.innerHTML=et),He=b(e),K(ae.$$.fragment,e),Me=b(e),Pe=p(e,"HR",{}),Ge=b(e),G=p(e,"P",{});var B=M(G);Be=H(B,"Getting to a point where the behavior felt predictable took a lot more effort than I expected ("),ge=p(B,"EM",{"data-svelte-h":!0}),w(ge)!=="svelte-2dbwd4"&&(ge.textContent=tt),qe=b(B),de=p(B,"A",{href:!0,target:!0});var rt=M(de);Ne=H(rt,"safari media fragment hack"),rt.forEach(l),Ue=H(B,", no "),me=p(B,"CODE",{"data-type":!0,"data-svelte-h":!0}),w(me)!=="svelte-1lul1jc"&&(me.textContent=lt),Ve=H(B,` in\r
	FireFox, `),_e=p(B,"EM",{"data-svelte-h":!0}),w(_e)!=="svelte-ynskcq"&&(_e.textContent=st),Qe=H(B,"), but I'm pretty happy with how it turned out :)"),B.forEach(l),this.h()},h(){x(A,"href",Tt),x(A,"target",Je),x(L,"data-type","html"),x(ie,"href",Et),x(ie,"target",Je),x(se,"role","list"),x(de,"href",Ht),x(de,"target",Je),x(me,"data-type","ext")},m(e,a){n(e,t,a),n(e,c,a),n(e,m,a),n(e,C,a),J(_,e,a),n(e,y,a),n(e,u,a),n(e,i,a),n(e,d,a),n(e,k,a),n(e,T,a),n(e,re,a),n(e,P,a),f(P,z),f(P,S),f(P,j),f(P,A),f(A,X),f(P,Y),n(e,Z,a),n(e,U,a),n(e,ee,a),n(e,R,a),n(e,te,a),n(e,V,a),n(e,r,a),n(e,v,a),f(v,D),f(v,L),f(v,O),f(v,ie),f(ie,Ae),f(v,Oe),n(e,xe,a),J(oe,e,a),n(e,we,a),n(e,pe,a),n(e,Ce,a),n(e,ye,a),n(e,ke,a),n(e,fe,a),n(e,Ie,a),n(e,ce,a),n(e,Te,a),n(e,se,a),n(e,Ee,a),n(e,ue,a),n(e,He,a),J(ae,e,a),n(e,Me,a),n(e,Pe,a),n(e,Ge,a),n(e,G,a),f(G,Be),f(G,ge),f(G,qe),f(G,de),f(de,Ne),f(G,Ue),f(G,me),f(G,Ve),f(G,_e),f(G,Qe),ze=!0},p(e,[a]){const be={};a&1&&(be.$$scope={dirty:a,ctx:e}),ae.$set(be)},i(e){ze||(q(_.$$.fragment,e),q(oe.$$.fragment,e),q(ae.$$.fragment,e),ze=!0)},o(e){N(_.$$.fragment,e),N(oe.$$.fragment,e),N(ae.$$.fragment,e),ze=!1},d(e){e&&(l(t),l(c),l(m),l(C),l(y),l(u),l(i),l(d),l(k),l(T),l(re),l(P),l(Z),l(U),l(ee),l(R),l(te),l(V),l(r),l(v),l(xe),l(we),l(pe),l(Ce),l(ye),l(ke),l(fe),l(Ie),l(ce),l(Te),l(se),l(Ee),l(ue),l(He),l(Me),l(Pe),l(Ge),l(G)),W(_,e),W(oe,e),W(ae,e)}}}const Je="_blank",Tt="https://www.redblobgames.com/making-of/draggable/",Et="https://cloudinary.com/glossary/device-pixel-ratio",Ht="https://muffinman.io/blog/hack-for-ios-safari-to-display-html-video-thumbnail/";class Rt extends Fe{constructor(t){super(),Se(this,t,null,It,je,{})}}export{Rt as component};
