import{s as $e,f as d,a as $,g as u,h as O,c as b,d as n,G as H,j as k,i as l,u as p,l as L,m as P,K as ce,p as Pe,S as Re,v as De}from"../chunks/scheduler.8d84c197.js";import{S as be,i as ye,b as q,d as N,m as Q,a as U,t as V,e as W,j as Ge}from"../chunks/index.5e028736.js";import{G as Me,R as _e}from"../chunks/Gif.81bb5509.js";import{g as de,a as ue}from"../chunks/spread.8a54911c.js";import{R as Ee}from"../chunks/RangeSlider.00a7ad4c.js";function Se(h){let a;return{c(){a=L("Blender donut")},l(s){a=P(s,"Blender donut")},m(s,i){l(s,a,i)},d(s){s&&n(a)}}}function je(h){let a;return{c(){a=L("Quick ttk on boss")},l(s){a=P(s,"Quick ttk on boss")},m(s,i){l(s,a,i)},d(s){s&&n(a)}}}function ze(h){let a,s,i,v,g,C,o,I=`Demo gifs: Tutorial Donut and gamer clip from my best 
		run of <a href="https://store.steampowered.com/app/1676130/Deadlink/" target="_blank">deadlink</a>.`,_;return i=new Me({props:{src:"/media/projects/GifScrubber/blender_donut.mp4",height:"min(240px, 24vh)",radius_type:"combo left",$$slots:{caption:[Se]},$$scope:{ctx:h}}}),g=new Me({props:{src:"/media/projects/GifScrubber/deadlink.mp4",height:"min(240px, 24vh)",t:"#t=1",autoplay:!1,controlsBg:"#0006",radius_type:"combo right",$$slots:{caption:[je]},$$scope:{ctx:h}}}),{c(){a=d("figure"),s=d("div"),q(i.$$.fragment),v=$(),q(g.$$.fragment),C=$(),o=d("figcaption"),o.innerHTML=I,this.h()},l(m){a=u(m,"FIGURE",{class:!0,role:!0});var f=O(a);s=u(f,"DIV",{class:!0});var y=O(s);N(i.$$.fragment,y),v=b(y),N(g.$$.fragment,y),y.forEach(n),C=b(f),o=u(f,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),H(o)!=="svelte-1s14123"&&(o.innerHTML=I),f.forEach(n),this.h()},h(){k(s,"class","svelte-o0m8eb"),k(o,"class","caption"),k(a,"class","max-w svelte-o0m8eb"),k(a,"role","group")},m(m,f){l(m,a,f),p(a,s),Q(i,s,null),p(s,v),Q(g,s,null),p(a,C),p(a,o),_=!0},p(m,[f]){const y={};f&1&&(y.$$scope={dirty:f,ctx:m}),i.$set(y);const R={};f&1&&(R.$$scope={dirty:f,ctx:m}),g.$set(R)},i(m){_||(U(i.$$.fragment,m),U(g.$$.fragment,m),_=!0)},o(m){V(i.$$.fragment,m),V(g.$$.fragment,m),_=!1},d(m){m&&n(a),W(i),W(g)}}}class Ae extends be{constructor(a){super(),ye(this,a,null,ze,$e,{})}}function Be(h){let a,s,i,v,g,C,o,I,_,m,f,y,R=`Comparing canvas quality at different render scales (simulated DPR=3). From left: no scaling (<em>20px</em>), 1×DPR
		(<em>60px</em>), and 2×DPR (<em>120px</em>).`,x;const E=[{size:20},{percent:h[0]},h[2]];let M={};for(let t=0;t<E.length;t+=1)M=ce(M,E[t]);i=new _e({props:M});const S=[{size:60},{percent:h[0]},h[2]];let K={};for(let t=0;t<S.length;t+=1)K=ce(K,S[t]);g=new _e({props:K});const G=[{size:120},{percent:h[0]},h[2]];let j={};for(let t=0;t<G.length;t+=1)j=ce(j,G[t]);o=new _e({props:j});const z=[h[1]];function w(t){h[3](t)}let A={};for(let t=0;t<z.length;t+=1)A=ce(A,z[t]);return h[0]!==void 0&&(A.value=h[0]),_=new Ee({props:A}),Pe.push(()=>Ge(_,"value",w)),{c(){a=d("figure"),s=d("div"),q(i.$$.fragment),v=$(),q(g.$$.fragment),C=$(),q(o.$$.fragment),I=$(),q(_.$$.fragment),f=$(),y=d("figcaption"),y.innerHTML=R,this.h()},l(t){a=u(t,"FIGURE",{class:!0,role:!0});var c=O(a);s=u(c,"DIV",{class:!0});var T=O(s);N(i.$$.fragment,T),v=b(T),N(g.$$.fragment,T),C=b(T),N(o.$$.fragment,T),T.forEach(n),I=b(c),N(_.$$.fragment,c),f=b(c),y=u(c,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),H(y)!=="svelte-49f377"&&(y.innerHTML=R),c.forEach(n),this.h()},h(){k(s,"class","radius examples svelte-15ez60t"),k(y,"class","caption"),k(a,"class","max-w svelte-15ez60t"),k(a,"role","group")},m(t,c){l(t,a,c),p(a,s),Q(i,s,null),p(s,v),Q(g,s,null),p(s,C),Q(o,s,null),p(a,I),Q(_,a,null),p(a,f),p(a,y),x=!0},p(t,[c]){const T=c&5?de(E,[E[0],c&1&&{percent:t[0]},c&4&&ue(t[2])]):{};i.$set(T);const B=c&5?de(S,[S[0],c&1&&{percent:t[0]},c&4&&ue(t[2])]):{};g.$set(B);const ne=c&5?de(G,[G[0],c&1&&{percent:t[0]},c&4&&ue(t[2])]):{};o.$set(ne);const ae=c&2?de(z,[ue(t[1])]):{};!m&&c&1&&(m=!0,ae.value=t[0],Re(()=>m=!1)),_.$set(ae)},i(t){x||(U(i.$$.fragment,t),U(g.$$.fragment,t),U(o.$$.fragment,t),U(_.$$.fragment,t),x=!0)},o(t){V(i.$$.fragment,t),V(g.$$.fragment,t),V(o.$$.fragment,t),V(_.$$.fragment,t),x=!1},d(t){t&&n(a),W(i),W(g),W(o),W(_)}}}function Fe(h,a,s){const i={thumbColor:"var(--slate-blue-dim)",showNumber:!0,numSize:"var(--step--1)",step:"1",numColor:"var(--color-caption)"};let v=25;const g={use_decimal:!1,use_DPR:!1,fillSpace:!0,seeking:!0,bgColor:"none"};function C(o){v=o,s(0,v)}return[v,i,g,C]}class Oe extends be{constructor(a){super(),ye(this,a,Fe,Be,$e,{})}}function qe(h){let a,s="<span>Gif Scrubber</span>",i,v,g=`An inline video player with custom controls. I made this component in the process of updating my website to have a
	more flexible way to handle media and avoid the headache of trying to optimize <em>real</em> gifs.`,C,o,I,_,m,f,y=`To keep it minimal and mobile-friendly, I stuck an always-visible playback <code data-type="html">button</code> on the
	corner and use a couple of pointer events to manage timeline scrubbing.`,R,x,E,M,S,K,G,j,z,w,A,t,c="svg",T,B,ne="many",ae,J,we="canvas",ge,X,he,ve,se,Y,re,Z,ke=`I scaled it up by another factor of 2 (<em>i.e.</em> the rightmost canvas) to make it <em>super</em> crisp—<em>super</em>
	unnecessary! It <em>was</em> slightly sharper and didn&#39;t have a noticeable impact on performance, so I went with it.`,le,ie,oe,ee,Ce=`<strong>TLDR</strong>: Due to support fragmentation, if you want to guarantee video compatibility while using any codec newer than h.264(which, <em>yes</em>), you&#39;ll need to provide more than one <code>src</code>. I
	ended up writing a Python script to backfill each <code data-type="ext">.mp4</code> with
	<code data-type="ext">.webm</code> before building. My magic ffmpeg command looks like this:`,pe,F,xe=`<code class="svelte-4db74d"><span>ffmpeg</span> -i [input] -movflags +faststart -pix_fmt yuv420p -c:v libvpx-vp9 -threads 8 -crf 40 -g 32 -deadline good -an [output]</code>
`,me,te,Te=`Getting it to work consistently was a lot more involved (<em>and hacky</em>) than I hoped, but I&#39;m happy with how it
	turned out.`,fe;return o=new Ae({}),Y=new Oe({}),{c(){a=d("h1"),a.innerHTML=s,i=$(),v=d("p"),v.innerHTML=g,C=$(),q(o.$$.fragment),I=$(),_=d("hr"),m=$(),f=d("p"),f.innerHTML=y,R=$(),x=d("p"),E=L(`It's set up so moving a distance across the container's width is proportional to seeking that fraction of the video's\r
	duration. Huge s/o to Red Blob Games for their in-depth article about `),M=d("a"),S=L("draggable objects"),K=L(", extremely helpful!"),G=$(),j=d("hr"),z=$(),w=d("p"),A=L("I originally made the progress indicator with an "),t=d("code"),t.textContent=c,T=L(" but, after "),B=d("em"),B.textContent=ne,ae=L(` failed\r
	attempts at fixing transform jank, scrapped it for a\r
	`),J=d("code"),J.textContent=we,ge=L(`. Without any adjustments, it'll look blocky and aliased on high-dpi screens.\r
	That's fixed by multiplying the base resolution by the `),X=d("a"),he=L("device pixel ratio (DPR)"),ve=L(` and\r
	normalizing the area with a CSS transform:`),se=$(),q(Y.$$.fragment),re=$(),Z=d("p"),Z.innerHTML=ke,le=$(),ie=d("hr"),oe=$(),ee=d("p"),ee.innerHTML=Ce,pe=$(),F=d("pre"),F.innerHTML=xe,me=$(),te=d("p"),te.innerHTML=Te,this.h()},l(e){a=u(e,"H1",{"data-svelte-h":!0}),H(a)!=="svelte-16mbdpp"&&(a.innerHTML=s),i=b(e),v=u(e,"P",{"data-svelte-h":!0}),H(v)!=="svelte-1gwt0bf"&&(v.innerHTML=g),C=b(e),N(o.$$.fragment,e),I=b(e),_=u(e,"HR",{}),m=b(e),f=u(e,"P",{"data-svelte-h":!0}),H(f)!=="svelte-3bkcyd"&&(f.innerHTML=y),R=b(e),x=u(e,"P",{});var r=O(x);E=P(r,`It's set up so moving a distance across the container's width is proportional to seeking that fraction of the video's\r
	duration. Huge s/o to Red Blob Games for their in-depth article about `),M=u(r,"A",{href:!0,target:!0});var He=O(M);S=P(He,"draggable objects"),He.forEach(n),K=P(r,", extremely helpful!"),r.forEach(n),G=b(e),j=u(e,"HR",{}),z=b(e),w=u(e,"P",{});var D=O(w);A=P(D,"I originally made the progress indicator with an "),t=u(D,"CODE",{"data-type":!0,"data-svelte-h":!0}),H(t)!=="svelte-mflvan"&&(t.textContent=c),T=P(D," but, after "),B=u(D,"EM",{"data-svelte-h":!0}),H(B)!=="svelte-q8yrbd"&&(B.textContent=ne),ae=P(D,` failed\r
	attempts at fixing transform jank, scrapped it for a\r
	`),J=u(D,"CODE",{"data-type":!0,"data-svelte-h":!0}),H(J)!=="svelte-jhma2z"&&(J.textContent=we),ge=P(D,`. Without any adjustments, it'll look blocky and aliased on high-dpi screens.\r
	That's fixed by multiplying the base resolution by the `),X=u(D,"A",{href:!0,target:!0});var Ie=O(X);he=P(Ie,"device pixel ratio (DPR)"),Ie.forEach(n),ve=P(D,` and\r
	normalizing the area with a CSS transform:`),D.forEach(n),se=b(e),N(Y.$$.fragment,e),re=b(e),Z=u(e,"P",{"data-svelte-h":!0}),H(Z)!=="svelte-1c23dwy"&&(Z.innerHTML=ke),le=b(e),ie=u(e,"HR",{}),oe=b(e),ee=u(e,"P",{"data-svelte-h":!0}),H(ee)!=="svelte-rz90hm"&&(ee.innerHTML=Ce),pe=b(e),F=u(e,"PRE",{class:!0,"data-svelte-h":!0}),H(F)!=="svelte-al91pe"&&(F.innerHTML=xe),me=b(e),te=u(e,"P",{"data-svelte-h":!0}),H(te)!=="svelte-aekpap"&&(te.innerHTML=Te),this.h()},h(){k(M,"href",Ne),k(M,"target",Le),k(t,"data-type","html"),k(J,"data-type","html"),k(X,"href",Qe),k(X,"target",Le),k(F,"class","codeblock overflow-scrollbar svelte-4db74d")},m(e,r){l(e,a,r),l(e,i,r),l(e,v,r),l(e,C,r),Q(o,e,r),l(e,I,r),l(e,_,r),l(e,m,r),l(e,f,r),l(e,R,r),l(e,x,r),p(x,E),p(x,M),p(M,S),p(x,K),l(e,G,r),l(e,j,r),l(e,z,r),l(e,w,r),p(w,A),p(w,t),p(w,T),p(w,B),p(w,ae),p(w,J),p(w,ge),p(w,X),p(X,he),p(w,ve),l(e,se,r),Q(Y,e,r),l(e,re,r),l(e,Z,r),l(e,le,r),l(e,ie,r),l(e,oe,r),l(e,ee,r),l(e,pe,r),l(e,F,r),l(e,me,r),l(e,te,r),fe=!0},p:De,i(e){fe||(U(o.$$.fragment,e),U(Y.$$.fragment,e),fe=!0)},o(e){V(o.$$.fragment,e),V(Y.$$.fragment,e),fe=!1},d(e){e&&(n(a),n(i),n(v),n(C),n(I),n(_),n(m),n(f),n(R),n(x),n(G),n(j),n(z),n(w),n(se),n(re),n(Z),n(le),n(ie),n(oe),n(ee),n(pe),n(F),n(me),n(te)),W(o,e),W(Y,e)}}}const Le="_blank",Ne="https://www.redblobgames.com/making-of/draggable/",Qe="https://cloudinary.com/glossary/device-pixel-ratio";class Xe extends be{constructor(a){super(),ye(this,a,null,qe,$e,{})}}export{Xe as component};
