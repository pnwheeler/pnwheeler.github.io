import{s as Se,f as o,a as x,g as c,h as T,c as C,d as s,G as k,j as y,i,u as p,l as H,m as M,K as $e,p as mt,T as ht,v as ot,x as gt,o as vt,N as ct,n as _t}from"../chunks/scheduler.6d6d93c7.js";import{S as Fe,i as je,b as U,d as V,m as Q,a as K,t as J,e as W,j as bt}from"../chunks/index.15fe4709.js";import{g as ye,a as xe}from"../chunks/spread.8a54911c.js";import{G as pt,R as We}from"../chunks/Gif.7ebaa9d9.js";import{R as $t}from"../chunks/RangeSlider.931194e2.js";import{e as ft}from"../chunks/each.e59479a4.js";function yt(_){let t;return{c(){t=H("Blender donut")},l(l){t=M(l,"Blender donut")},m(l,f){i(l,t,f)},d(l){l&&s(t)}}}function xt(_){let t;return{c(){t=H("Quick ttk on boss")},l(l){t=M(l,"Quick ttk on boss")},m(l,f){i(l,t,f)},d(l){l&&s(t)}}}function Ct(_){let t,l,f,h,m,b,v,g=`Demo gifs: Tutorial Donut and gamer clip from my best 
		run of <a href="https://store.steampowered.com/app/1676130/Deadlink/" target="_blank">deadlink</a>.`,d;return f=new pt({props:{src:"/media/projects/GifScrubber/blender_donut.mp4",height:"min(240px, 40vw)",radius_type:"combo left",$$slots:{caption:[yt]},$$scope:{ctx:_}}}),m=new pt({props:{src:"/media/projects/GifScrubber/deadlink.mp4",height:"min(240px, 40vw)",t:"#t=1",autoplay:!1,controlsBg:"#0006",radius_type:"combo right",$$slots:{caption:[xt]},$$scope:{ctx:_}}}),{c(){t=o("figure"),l=o("div"),U(f.$$.fragment),h=x(),U(m.$$.fragment),b=x(),v=o("figcaption"),v.innerHTML=g,this.h()},l(u){t=c(u,"FIGURE",{class:!0,role:!0});var n=T(t);l=c(n,"DIV",{class:!0});var w=T(l);V(f.$$.fragment,w),h=C(w),V(m.$$.fragment,w),w.forEach(s),b=C(n),v=c(n,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),k(v)!=="svelte-1s14123"&&(v.innerHTML=g),n.forEach(s),this.h()},h(){y(l,"class","radius-group svelte-ycbufb"),y(v,"class","caption"),y(t,"class","max-w svelte-ycbufb"),y(t,"role","group")},m(u,n){i(u,t,n),p(t,l),Q(f,l,null),p(l,h),Q(m,l,null),p(t,b),p(t,v),d=!0},p(u,[n]){const w={};n&1&&(w.$$scope={dirty:n,ctx:u}),f.$set(w);const I={};n&1&&(I.$$scope={dirty:n,ctx:u}),m.$set(I)},i(u){d||(K(f.$$.fragment,u),K(m.$$.fragment,u),d=!0)},o(u){J(f.$$.fragment,u),J(m.$$.fragment,u),d=!1},d(u){u&&s(t),W(f),W(m)}}}class wt extends Fe{constructor(t){super(),je(this,t,null,Ct,Se,{})}}function kt(_){let t,l,f,h,m,b="Default (20px)",v,g,d,u,n="1×DPR (60px)",w,I,E,F,ne="2×DPR (120px)",P,L,j,he,S,A='Comparing the canvas quality at different render scales <span class="dimmed">(<em>magnified to emphasize crust</em>)</span>.',X;const Y=[{size:20},{percent:_[0]},_[2]];let Z={};for(let r=0;r<Y.length;r+=1)Z=$e(Z,Y[r]);h=new We({props:Z});const B=[{size:60},{percent:_[0]},_[2]];let ee={};for(let r=0;r<B.length;r+=1)ee=$e(ee,B[r]);d=new We({props:ee});const z=[{size:120},{percent:_[0]},_[2]];let ge={};for(let r=0;r<z.length;r+=1)ge=$e(ge,z[r]);E=new We({props:ge});const te=[_[1]];function N(r){_[3](r)}let re={};for(let r=0;r<te.length;r+=1)re=$e(re,te[r]);return _[0]!==void 0&&(re.value=_[0]),L=new $t({props:re}),mt.push(()=>bt(L,"value",N)),{c(){t=o("figure"),l=o("div"),f=o("figure"),U(h.$$.fragment),m=o("figcaption"),m.textContent=b,v=x(),g=o("figure"),U(d.$$.fragment),u=o("figcaption"),u.textContent=n,w=x(),I=o("figure"),U(E.$$.fragment),F=o("figcaption"),F.textContent=ne,P=x(),U(L.$$.fragment),he=x(),S=o("figcaption"),S.innerHTML=A,this.h()},l(r){t=c(r,"FIGURE",{class:!0,role:!0});var $=T(t);l=c($,"DIV",{class:!0});var D=T(l);f=c(D,"FIGURE",{class:!0});var R=T(f);V(h.$$.fragment,R),m=c(R,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),k(m)!=="svelte-z9i5lc"&&(m.textContent=b),R.forEach(s),v=C(D),g=c(D,"FIGURE",{class:!0});var se=T(g);V(d.$$.fragment,se),u=c(se,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),k(u)!=="svelte-frrpe1"&&(u.textContent=n),se.forEach(s),w=C(D),I=c(D,"FIGURE",{class:!0});var O=T(I);V(E.$$.fragment,O),F=c(O,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),k(F)!=="svelte-nddsfz"&&(F.textContent=ne),O.forEach(s),D.forEach(s),P=C($),V(L.$$.fragment,$),he=C($),S=c($,"FIGCAPTION",{class:!0,"data-svelte-h":!0}),k(S)!=="svelte-1i7h7ud"&&(S.innerHTML=A),$.forEach(s),this.h()},h(){y(m,"class","svelte-1eoy1h6"),y(f,"class","svelte-1eoy1h6"),y(u,"class","svelte-1eoy1h6"),y(g,"class","svelte-1eoy1h6"),y(F,"class","svelte-1eoy1h6"),y(I,"class","svelte-1eoy1h6"),y(l,"class","radius-group figblock box-shadow svelte-1eoy1h6"),y(S,"class","caption svelte-1eoy1h6"),y(t,"class","max-w svelte-1eoy1h6"),y(t,"role","group")},m(r,$){i(r,t,$),p(t,l),p(l,f),Q(h,f,null),p(f,m),p(l,v),p(l,g),Q(d,g,null),p(g,u),p(l,w),p(l,I),Q(E,I,null),p(I,F),p(t,P),Q(L,t,null),p(t,he),p(t,S),X=!0},p(r,[$]){const D=$&5?ye(Y,[Y[0],$&1&&{percent:r[0]},$&4&&xe(r[2])]):{};h.$set(D);const R=$&5?ye(B,[B[0],$&1&&{percent:r[0]},$&4&&xe(r[2])]):{};d.$set(R);const se=$&5?ye(z,[z[0],$&1&&{percent:r[0]},$&4&&xe(r[2])]):{};E.$set(se);const O=$&2?ye(te,[xe(r[1])]):{};!j&&$&1&&(j=!0,O.value=r[0],ht(()=>j=!1)),L.$set(O)},i(r){X||(K(h.$$.fragment,r),K(d.$$.fragment,r),K(E.$$.fragment,r),K(L.$$.fragment,r),X=!0)},o(r){J(h.$$.fragment,r),J(d.$$.fragment,r),J(E.$$.fragment,r),J(L.$$.fragment,r),X=!1},d(r){r&&s(t),W(h),W(d),W(E),W(L)}}}function It(_,t,l){const f={thumbColor:"var(--slate-blue-dim)",showNumber:!0,numSize:"var(--step--1)",step:"1",numColor:"var(--tx--1)"};let h=75;const m={use_decimal:!1,use_DPR:!1,fillSpace:!0,seeking:!0,bgColor:"none",colorFill:"#686766",colorStroke:"#8e8d8a44"};function b(v){h=v,l(0,h)}return[h,f,m,b]}class Tt extends Fe{constructor(t){super(),je(this,t,It,kt,Se,{})}}function ut(_,t,l){const f=_.slice();return f[5]=t[l],f}function dt(_){let t,l=_[5].value+"",f,h;return{c(){t=o("span"),f=H(l),this.h()},l(m){t=c(m,"SPAN",{class:!0});var b=T(t);f=M(b,l),b.forEach(s),this.h()},h(){y(t,"class",h=ct(_[5].type)+" svelte-18zsfe7")},m(m,b){i(m,t,b),p(t,f)},p(m,b){b&1&&l!==(l=m[5].value+"")&&_t(f,l),b&1&&h!==(h=ct(m[5].type)+" svelte-18zsfe7")&&y(t,"class",h)},d(m){m&&s(t)}}}function Et(_){let t,l,f='<svg viewBox="-5 0 50 20" width="55px" height="24px" aria-hidden="true" class="svelte-18zsfe7"><circle r="5" cx="5" cy="10" fill="var(--slate-blue-dim)"></circle><circle r="5" cx="20" cy="10" fill="var(--slate-blue)"></circle><circle r="5" cx="35" cy="10" fill="var(--slate)"></circle></svg>',h,m,b,v=ft(_[1](_[0])),g=[];for(let d=0;d<v.length;d+=1)g[d]=dt(ut(_,v,d));return{c(){t=o("div"),l=o("div"),l.innerHTML=f,h=x(),m=o("pre"),b=o("code");for(let d=0;d<g.length;d+=1)g[d].c();this.h()},l(d){t=c(d,"DIV",{class:!0});var u=T(t);l=c(u,"DIV",{class:!0,"data-svelte-h":!0}),k(l)!=="svelte-n5svtm"&&(l.innerHTML=f),h=C(u),m=c(u,"PRE",{class:!0});var n=T(m);b=c(n,"CODE",{class:!0});var w=T(b);for(let I=0;I<g.length;I+=1)g[I].l(w);w.forEach(s),n.forEach(s),u.forEach(s),this.h()},h(){y(l,"class","title svelte-18zsfe7"),y(b,"class","svelte-18zsfe7"),y(m,"class","codeblock overflow-scrollbar svelte-18zsfe7"),y(t,"class","max-w pseudo-border svelte-18zsfe7")},m(d,u){i(d,t,u),p(t,l),p(t,h),p(t,m),p(m,b);for(let n=0;n<g.length;n+=1)g[n]&&g[n].m(b,null)},p(d,[u]){if(u&3){v=ft(d[1](d[0]));let n;for(n=0;n<v.length;n+=1){const w=ut(d,v,n);g[n]?g[n].p(w,u):(g[n]=dt(w),g[n].c(),g[n].m(b,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=v.length}},i:ot,o:ot,d(d){d&&s(t),gt(g,d)}}}const Ht=/\S+\s*/g;function Mt(_,t,l){let{content:f=""}=t,h=[];const m=v=>[...v.match(Ht)],b=v=>{let g=v.slice(0),d=g.shift(),u=[];return u.push({value:d,type:"program"}),g.forEach(n=>{let w={value:n,type:"space"};switch(!0){case n[0]=="-":w.type="option";break;case n[0]=="[":w.type="file";break;case(n[0]>="0"&&n[0]<="9"):w.type="number";break;default:w.type="default";break}u.push(w)}),u};return vt(()=>{l(0,h=m(f))}),_.$$set=v=>{"content"in v&&l(2,f=v.content)},[h,b,f]}class Pt extends Fe{constructor(t){super(),je(this,t,Mt,Et,Se,{content:2})}}function Gt(_){let t,l="<span>Gif Scrubber</span>",f,h,m=`An inline video player that acts as a drop-in alternative to <code data-type="ext">GIFs</code>. It’s a pretty common
	pattern for ‘modernizing’ the old format, but I put a good chunk of time into getting it working how I wanted and
	added a couple progressive enhancements.`,b,v,g,d,u,n,w="Controls",I,E,F=`To keep everything minimal and mobile-friendly, I decided to make custom controls. A fixed button toggles play state\r
	and, when the container is grabbed, pointer events kick in to manage the timeline.`,ne,P,L,j,he="s.t.",S,A,X,Y,Z,B,ee,z,ge="Progress indicator",te,N,re=`The graphic is <s>shamelessly ripped from</s> <em class="txt-glow">inspired by</em> the countdown timer from
	iOS—it&#39;s compact and conveys pretty much exactly what it&#39;s doing (loop + time). I originally used an
	<code data-type="html">svg</code>
	but, following <em>several</em> failed remakes, I wasn&#39;t able to figure out the cause of janky transforms.`,r,$,D,R,se="canvas",O,ie,Ae,Oe,Ce,oe,we,ce,Ye=`I ended up doubling the dimensions (<em>i.e.</em> the rightmost canvas) to make it
	<em>super</em> crisp—<em>super</em> unnecessary! It <em>was</em> slightly sharper and there <em>wasn&#39;t</em> any noticeable
	impact on performance (only a single canvas is active/time), so I went with it.`,ke,Ie,Te,pe,Ze="Media Support",Ee,fe,et=`The quality/compression benefits video brings are really nice, but using them to replace <em>_real_</em> gifs comes with
	couple of tradeoffs:`,He,le,tt="<li>can&#39;t <em>hold-to-save</em> on mobile</li> <li>they aren&#39;t visible in reader mode</li> <li>playback support depends on browser + hardware features</li>",Me,ue,st=`To make a long story short, I address the last point by running a pre-build Python script to crawl my directory and
	generate <code data-type="ext">.webm</code> fallbacks where none exist. The <em class="txt-glow">magic</em> <code data-type="ext">ffmpeg</code> command I use to make a (hopefully) more compatible version looks like this:`,Pe,ae,Ge,Le,Re,G,qe,ve,lt="e.g.",Be,de,Ne,Ue,me,at=".h265",Ve,_e,nt="etc.",Qe,ze;v=new wt({}),oe=new Tt({});const Ke=[_[0]];let Je={};for(let e=0;e<Ke.length;e+=1)Je=$e(Je,Ke[e]);return ae=new Pt({props:Je}),{c(){t=o("h1"),t.innerHTML=l,f=x(),h=o("p"),h.innerHTML=m,b=x(),U(v.$$.fragment),g=x(),d=o("hr"),u=x(),n=o("h3"),n.textContent=w,I=x(),E=o("p"),E.textContent=F,ne=x(),P=o("p"),L=H("It's set up "),j=o("em"),j.textContent=he,S=H(` moving a distance across the figure’s width is proportional to seeking that fraction of its\r
	video's duration. So to Red Blob Games for their in-depth article about\r
	`),A=o("a"),X=H("draggable objects"),Y=H(" and events—extremely helpful!"),Z=x(),B=o("hr"),ee=x(),z=o("h3"),z.textContent=ge,te=x(),N=o("p"),N.innerHTML=re,r=x(),$=o("p"),D=H("Switching over to a "),R=o("code"),R.textContent=se,O=H(` fixed that issue, but introduced another that gave it a\r
	blocky, aliased look on my phone. Thankfully, I learned browsers provide a fix for high dpi screens courtesy the\r
	`),ie=o("a"),Ae=H("device pixel ratio (DPR)"),Oe=H(", which can be queried and used as a resolution multiplier:"),Ce=x(),U(oe.$$.fragment),we=x(),ce=o("p"),ce.innerHTML=Ye,ke=x(),Ie=o("hr"),Te=x(),pe=o("h3"),pe.textContent=Ze,Ee=x(),fe=o("p"),fe.innerHTML=et,He=x(),le=o("ol"),le.innerHTML=tt,Me=x(),ue=o("p"),ue.innerHTML=st,Pe=x(),U(ae.$$.fragment),Ge=x(),Le=o("hr"),Re=x(),G=o("p"),qe=H("Getting to a point where the behavior felt predictable took a lot more effort than I expected ("),ve=o("em"),ve.textContent=lt,Be=x(),de=o("a"),Ne=H("safari media fragment hack"),Ue=H(", no "),me=o("code"),me.textContent=at,Ve=H(` in\r
	FireFox, `),_e=o("em"),_e.textContent=nt,Qe=H("), but I'm pretty happy with how it turned out :)"),this.h()},l(e){t=c(e,"H1",{"data-svelte-h":!0}),k(t)!=="svelte-16mbdpp"&&(t.innerHTML=l),f=C(e),h=c(e,"P",{"data-svelte-h":!0}),k(h)!=="svelte-ln5zvg"&&(h.innerHTML=m),b=C(e),V(v.$$.fragment,e),g=C(e),d=c(e,"HR",{}),u=C(e),n=c(e,"H3",{"data-svelte-h":!0}),k(n)!=="svelte-pu7e26"&&(n.textContent=w),I=C(e),E=c(e,"P",{"data-svelte-h":!0}),k(E)!=="svelte-q6b5yg"&&(E.textContent=F),ne=C(e),P=c(e,"P",{});var a=T(P);L=M(a,"It's set up "),j=c(a,"EM",{"data-svelte-h":!0}),k(j)!=="svelte-hspnzd"&&(j.textContent=he),S=M(a,` moving a distance across the figure’s width is proportional to seeking that fraction of its\r
	video's duration. So to Red Blob Games for their in-depth article about\r
	`),A=c(a,"A",{href:!0,target:!0});var De=T(A);X=M(De,"draggable objects"),De.forEach(s),Y=M(a," and events—extremely helpful!"),a.forEach(s),Z=C(e),B=c(e,"HR",{}),ee=C(e),z=c(e,"H3",{"data-svelte-h":!0}),k(z)!=="svelte-lxue3i"&&(z.textContent=ge),te=C(e),N=c(e,"P",{"data-svelte-h":!0}),k(N)!=="svelte-n8fp47"&&(N.innerHTML=re),r=C(e),$=c(e,"P",{});var be=T($);D=M(be,"Switching over to a "),R=c(be,"CODE",{"data-type":!0,"data-svelte-h":!0}),k(R)!=="svelte-jhma2z"&&(R.textContent=se),O=M(be,` fixed that issue, but introduced another that gave it a\r
	blocky, aliased look on my phone. Thankfully, I learned browsers provide a fix for high dpi screens courtesy the\r
	`),ie=c(be,"A",{href:!0,target:!0});var rt=T(ie);Ae=M(rt,"device pixel ratio (DPR)"),rt.forEach(s),Oe=M(be,", which can be queried and used as a resolution multiplier:"),be.forEach(s),Ce=C(e),V(oe.$$.fragment,e),we=C(e),ce=c(e,"P",{"data-svelte-h":!0}),k(ce)!=="svelte-10d4d2w"&&(ce.innerHTML=Ye),ke=C(e),Ie=c(e,"HR",{}),Te=C(e),pe=c(e,"H3",{"data-svelte-h":!0}),k(pe)!=="svelte-ejqcuf"&&(pe.textContent=Ze),Ee=C(e),fe=c(e,"P",{"data-svelte-h":!0}),k(fe)!=="svelte-bn07u1"&&(fe.innerHTML=et),He=C(e),le=c(e,"OL",{role:!0,"data-svelte-h":!0}),k(le)!=="svelte-31bwzl"&&(le.innerHTML=tt),Me=C(e),ue=c(e,"P",{"data-svelte-h":!0}),k(ue)!=="svelte-1vtztio"&&(ue.innerHTML=st),Pe=C(e),V(ae.$$.fragment,e),Ge=C(e),Le=c(e,"HR",{}),Re=C(e),G=c(e,"P",{});var q=T(G);qe=M(q,"Getting to a point where the behavior felt predictable took a lot more effort than I expected ("),ve=c(q,"EM",{"data-svelte-h":!0}),k(ve)!=="svelte-2dbwd4"&&(ve.textContent=lt),Be=C(q),de=c(q,"A",{href:!0,target:!0});var it=T(de);Ne=M(it,"safari media fragment hack"),it.forEach(s),Ue=M(q,", no "),me=c(q,"CODE",{"data-type":!0,"data-svelte-h":!0}),k(me)!=="svelte-1lul1jc"&&(me.textContent=at),Ve=M(q,` in\r
	FireFox, `),_e=c(q,"EM",{"data-svelte-h":!0}),k(_e)!=="svelte-ynskcq"&&(_e.textContent=nt),Qe=M(q,"), but I'm pretty happy with how it turned out :)"),q.forEach(s),this.h()},h(){y(A,"href",Lt),y(A,"target",Xe),y(R,"data-type","html"),y(ie,"href",Rt),y(ie,"target",Xe),y(le,"role","list"),y(de,"href",zt),y(de,"target",Xe),y(me,"data-type","ext")},m(e,a){i(e,t,a),i(e,f,a),i(e,h,a),i(e,b,a),Q(v,e,a),i(e,g,a),i(e,d,a),i(e,u,a),i(e,n,a),i(e,I,a),i(e,E,a),i(e,ne,a),i(e,P,a),p(P,L),p(P,j),p(P,S),p(P,A),p(A,X),p(P,Y),i(e,Z,a),i(e,B,a),i(e,ee,a),i(e,z,a),i(e,te,a),i(e,N,a),i(e,r,a),i(e,$,a),p($,D),p($,R),p($,O),p($,ie),p(ie,Ae),p($,Oe),i(e,Ce,a),Q(oe,e,a),i(e,we,a),i(e,ce,a),i(e,ke,a),i(e,Ie,a),i(e,Te,a),i(e,pe,a),i(e,Ee,a),i(e,fe,a),i(e,He,a),i(e,le,a),i(e,Me,a),i(e,ue,a),i(e,Pe,a),Q(ae,e,a),i(e,Ge,a),i(e,Le,a),i(e,Re,a),i(e,G,a),p(G,qe),p(G,ve),p(G,Be),p(G,de),p(de,Ne),p(G,Ue),p(G,me),p(G,Ve),p(G,_e),p(G,Qe),ze=!0},p(e,[a]){const De=a&1?ye(Ke,[xe(e[0])]):{};ae.$set(De)},i(e){ze||(K(v.$$.fragment,e),K(oe.$$.fragment,e),K(ae.$$.fragment,e),ze=!0)},o(e){J(v.$$.fragment,e),J(oe.$$.fragment,e),J(ae.$$.fragment,e),ze=!1},d(e){e&&(s(t),s(f),s(h),s(b),s(g),s(d),s(u),s(n),s(I),s(E),s(ne),s(P),s(Z),s(B),s(ee),s(z),s(te),s(N),s(r),s($),s(Ce),s(we),s(ce),s(ke),s(Ie),s(Te),s(pe),s(Ee),s(fe),s(He),s(le),s(Me),s(ue),s(Pe),s(Ge),s(Le),s(Re),s(G)),W(v,e),W(oe,e),W(ae,e)}}}const Xe="_blank",Lt="https://www.redblobgames.com/making-of/draggable/",Rt="https://cloudinary.com/glossary/device-pixel-ratio",zt="https://muffinman.io/blog/hack-for-ios-safari-to-display-html-video-thumbnail/";function Dt(_){return[{content:"ffmpeg -i [input.mp4] -pix_fmt yuv420p -c:v libvpx-vp9 -threads 8 -crf 40 -g 32 -deadline good -an [output.webm]"}]}class Bt extends Fe{constructor(t){super(),je(this,t,Dt,Gt,Se,{})}}export{Bt as component};
