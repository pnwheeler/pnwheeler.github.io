import{s as S,f as v,l as le,g as y,h as k,m as se,d,j as p,r as I,i as T,u as E,n as ne,v as D,w as re,o as G,p as J,a as N,c as j,k as g,x as ie,b as oe,e as L,y as V,z as K,A as fe,B as ce,C as ue,D as he}from"../chunks/scheduler.1a83071e.js";import{S as C,i as M,a as b,g as B,c as P,t as w,b as Q,d as Y,m as Z,e as x,f as $,h as _e}from"../chunks/index.98f22588.js";import{b as de,f as me,a as ee}from"../chunks/index.6c0f9f0a.js";import{t as z,a as pe,u as F,d as be}from"../chunks/stores.71faf325.js";import{g as ge,a as ve}from"../chunks/utils.8ca1d0c8.js";import{e as O}from"../chunks/each.e59479a4.js";const ye=({url:l})=>{const{pathname:e}=l;return{pathname:e}},ke=!0,Fe=Object.freeze(Object.defineProperty({__proto__:null,load:ye,prerender:ke},Symbol.toStringTag,{value:"Module"}));function we(l){let e,a,t;return{c(){e=v("li"),a=v("a"),t=le(l[2]),this.h()},l(s){e=y(s,"LI",{class:!0});var r=k(e);a=y(r,"A",{href:!0,class:!0});var c=k(a);t=se(c,l[2]),c.forEach(d),r.forEach(d),this.h()},h(){p(a,"href",l[1]),p(a,"class","svelte-2ed2u3"),p(e,"class","svelte-2ed2u3"),I(e,"active",l[0])},m(s,r){T(s,e,r),E(e,a),E(a,t),l[5](e)},p(s,[r]){r&4&&ne(t,s[2]),r&2&&p(a,"href",s[1]),r&1&&I(e,"active",s[0])},i:D,o:D,d(s){s&&d(e),l[5](null)}}}function Ee(l,e,a){const t=re();let{active:s=!1}=e,{id:r}=e,{href:c}=e,{title:i}=e,u=0,n=0,_;function f(){t("activeChanged",{width:u,left:n,path:c,id:r})}G(()=>{u=_.clientWidth,n=_.offsetLeft,s&&f()});function h(o){J[o?"unshift":"push"](()=>{_=o,a(3,_)})}return l.$$set=o=>{"active"in o&&a(0,s=o.active),"id"in o&&a(4,r=o.id),"href"in o&&a(1,c=o.href),"title"in o&&a(2,i=o.title)},l.$$.update=()=>{l.$$.dirty&1&&s&&f()},[s,c,i,_,r,h]}class Te extends C{constructor(e){super(),M(this,e,Ee,we,S,{active:0,id:4,href:1,title:2})}}const A=[{id:0,title:"home",href:"/"},{id:1,title:"projects",href:"/projects"},{id:2,title:"misc",href:"/other"}];function U(l,e,a){const t=l.slice();t[10]=e[a];const s=t[0]==t[10].href;return t[11]=s,t}function q(l){let e;return{c(){e=v("div"),this.h()},l(a){e=y(a,"DIV",{class:!0,style:!0});var t=k(e);t.forEach(d),this.h()},h(){p(e,"class","nested pseudo-border svelte-ty3gy3"),g(e,"--w",l[2]+"px"),g(e,"--l",l[3]+"px")},m(a,t){T(a,e,t)},p(a,t){t&4&&g(e,"--w",a[2]+"px"),t&8&&g(e,"--l",a[3]+"px")},d(a){a&&d(e)}}}function H(l){let e,a;return e=new Te({props:{active:l[11],id:l[10].id,href:l[10].href,title:l[10].title}}),e.$on("activeChanged",l[7]),{c(){Q(e.$$.fragment)},l(t){Y(e.$$.fragment,t)},m(t,s){Z(e,t,s),a=!0},p(t,s){const r={};s&1&&(r.active=t[11]),e.$set(r)},i(t){a||(b(e.$$.fragment,t),a=!0)},o(t){w(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}function Ae(l){let e,a,t,s,r,c,i=l[6]&&q(l),u=O(A),n=[];for(let f=0;f<u.length;f+=1)n[f]=H(U(l,u,f));const _=f=>w(n[f],1,1,()=>{n[f]=null});return{c(){e=v("nav"),i&&i.c(),a=N(),t=v("ul");for(let f=0;f<n.length;f+=1)n[f].c();s=N(),r=v("div"),this.h()},l(f){e=y(f,"NAV",{class:!0});var h=k(e);i&&i.l(h),a=j(h),t=y(h,"UL",{class:!0});var o=k(t);for(let m=0;m<n.length;m+=1)n[m].l(o);s=j(o),r=y(o,"DIV",{id:!0,style:!0,class:!0}),k(r).forEach(d),o.forEach(d),h.forEach(d),this.h()},h(){p(r,"id","bgtab"),g(r,"--w",l[2]+"px"),g(r,"--l",l[3]+"px"),g(r,"--br",(l[4]==0||l[4]==A.length-1?.5:2)+"rem"),p(r,"class","svelte-ty3gy3"),I(r,"notInPath",l[1]),p(t,"class","svelte-ty3gy3"),p(e,"class","nav pseudo-border svelte-ty3gy3")},m(f,h){T(f,e,h),i&&i.m(e,null),E(e,a),E(e,t);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(t,null);E(t,s),E(t,r),l[8](r),c=!0},p(f,[h]){if(f[6]?i?i.p(f,h):(i=q(f),i.c(),i.m(e,a)):i&&(i.d(1),i=null),h&129){u=O(A);let o;for(o=0;o<u.length;o+=1){const m=U(f,u,o);n[o]?(n[o].p(m,h),b(n[o],1)):(n[o]=H(m),n[o].c(),b(n[o],1),n[o].m(t,s))}for(B(),o=u.length;o<n.length;o+=1)_(o);P()}(!c||h&4)&&g(r,"--w",f[2]+"px"),(!c||h&8)&&g(r,"--l",f[3]+"px"),(!c||h&16)&&g(r,"--br",(f[4]==0||f[4]==A.length-1?.5:2)+"rem"),(!c||h&2)&&I(r,"notInPath",f[1])},i(f){if(!c){for(let h=0;h<u.length;h+=1)b(n[h]);c=!0}},o(f){n=n.filter(Boolean);for(let h=0;h<n.length;h+=1)w(n[h]);c=!1},d(f){f&&d(e),i&&i.d(),ie(n,f),l[8](null)}}}function Ie(l,e,a){let t,{pathname:s}=e,r=0,c=0,i=0,u="",n,_=!1;function f(o){let m=o.detail;a(2,r=1.05*m.width);let te=m.width*.025;a(3,c=m.left-te),a(4,i=m.id),z.setNewTab(i),u=m.path;const ae=[{width:`${r}px`},{transform:`translate(${c}px, 0)`}];n.animate(ae,{duration:325,fill:"forwards",easing:"cubic-bezier(0.34, 1.56, 0.69, .9)"})}oe(()=>{s!=u?a(1,_=!0):(z.setNewTab(i),a(1,_=!1))});function h(o){J[o?"unshift":"push"](()=>{n=o,a(5,n)})}return l.$$set=o=>{"pathname"in o&&a(0,s=o.pathname)},l.$$.update=()=>{l.$$.dirty&3&&a(6,t=s.includes("/projects")&&_)},[s,_,r,c,i,n,t,f,h]}class Se extends C{constructor(e){super(),M(this,e,Ie,Ae,S,{pathname:0})}}function R(l){let e,a,t,s,r=l[3],c,i;t=new Se({props:{pathname:l[3]}});let u=W(l);return{c(){e=v("div"),a=v("header"),Q(t.$$.fragment),s=N(),u.c(),this.h()},l(n){e=y(n,"DIV",{class:!0});var _=k(e);a=y(_,"HEADER",{class:!0});var f=k(a);Y(t.$$.fragment,f),f.forEach(d),s=j(_),u.l(_),_.forEach(d),this.h()},h(){p(a,"class","nav-bar svelte-1429hfn"),p(e,"class","page svelte-1429hfn")},m(n,_){T(n,e,_),E(e,a),Z(t,a,null),E(e,s),u.m(e,null),i=!0},p(n,_){const f={};_&8&&(f.pathname=n[3]),t.$set(f),_&8&&S(r,r=n[3])?(B(),w(u,1,1,D),P(),u=W(n),u.c(),b(u,1),u.m(e,null)):u.p(n,_)},i(n){i||(b(t.$$.fragment,n),b(u),n&&(c||K(()=>{c=$(e,ee,{duration:300}),c.start()})),i=!0)},o(n){w(t.$$.fragment,n),w(u),i=!1},d(n){n&&d(e),x(t),u.d(n)}}}function W(l){let e,a,t,s;const r=l[8].default,c=fe(r,l,l[7],null);return{c(){e=v("main"),c&&c.c(),this.h()},l(i){e=y(i,"MAIN",{class:!0});var u=k(e);c&&c.l(u),u.forEach(d),this.h()},h(){p(e,"class","flow svelte-1429hfn")},m(i,u){T(i,e,u),c&&c.m(e,null),s=!0},p(i,u){l=i,c&&c.p&&(!s||u&128)&&ce(c,r,l,l[7],s?he(r,l[7],u,null):ue(l[7]),null)},i(i){s||(b(c,i),i&&K(()=>{s&&(t&&t.end(1),a=$(e,me,{x:l[2],duration:l[1],delay:je,easing:de}),a.start())}),s=!0)},o(i){w(c,i),a&&a.invalidate(),i&&(t=_e(e,ee,{duration:250,delay:0})),s=!1},d(i){i&&d(e),c&&c.d(i),i&&t&&t.end()}}}function De(l){let e,a,t=l[0]&&R(l);return{c(){t&&t.c(),e=L()},l(s){t&&t.l(s),e=L()},m(s,r){t&&t.m(s,r),T(s,e,r),a=!0},p(s,[r]){s[0]?t?(t.p(s,r),r&1&&b(t,1)):(t=R(s),t.c(),b(t,1),t.m(e.parentNode,e)):t&&(B(),w(t,1,1,()=>{t=null}),P())},i(s){a||(b(t),a=!0)},o(s){w(t),a=!1},d(s){s&&d(e),t&&t.d(s)}}}const Ne=16,X=550,je=300;function Ce(l,e,a){let t,s,r,c,i;V(l,be,h=>a(5,c=h)),V(l,F,h=>a(6,i=h));let{$$slots:u={},$$scope:n}=e,{data:_}=e,f=!1;return G(async()=>{pe.setTemperature(await ge()),F.setFallback(await ve()),a(0,f=!0)}),l.$$set=h=>{"data"in h&&a(4,_=h.data),"$$scope"in h&&a(7,n=h.$$scope)},l.$$.update=()=>{l.$$.dirty&16&&a(3,t=_.pathname),l.$$.dirty&64&&console.log("fallback to webm: "+i),l.$$.dirty&32&&a(2,s=Ne*c),l.$$.dirty&32&&a(1,r=X+X*Math.abs(1-Math.abs(c))*.15)},[f,r,s,t,_,c,i,n,u]}class Oe extends C{constructor(e){super(),M(this,e,Ce,De,S,{data:4})}}export{Oe as component,Fe as universal};
